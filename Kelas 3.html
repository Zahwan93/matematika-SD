<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
<!-- MathJax untuk tampilan rumus -->
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

  <title>Kebun Ilmu – Media Pembelajaran Interaktif</title>
  <!-- TailwindCSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root{--brand:#10b981;--brand-2:#22d3ee}
    html,body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial,"Noto Sans","Apple Color Emoji","Segoe UI Emoji"}
    .glass{backdrop-filter:saturate(180%) blur(10px); background:linear-gradient(180deg,rgba(255,255,255,.8),rgba(255,255,255,.6))}
    .chip{border:1px solid rgba(0,0,0,.06);}
    .btn{transition:transform .05s ease}
    .btn:active{transform:translateY(1px) scale(.99)}
    details>summary{list-style:none}
    details>summary::-webkit-details-marker{display:none}
  </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-sky-50 via-emerald-50 to-white text-gray-800">
  <!-- Header / Brand -->
  <header class="sticky top-0 z-40 border-b border-emerald-100/60 glass">
    <div class="max-w-6xl mx-auto px-4 sm:px-6 py-3 flex items-center gap-3">
      <img src="https://zahwan93.github.io/Kebun-Ilmu-Matematika-SMP/logo.png" alt="Logo Kebun Ilmu" class="w-10 h-10 rounded-xl shadow" />
      <div class="flex-1">
        <h1 class="text-lg sm:text-2xl font-extrabold tracking-tight">
          Kebun Ilmu <span class="text-emerald-600">— Media Pembelajaran Interaktif</span>
        </h1>
        <p class="text-xs sm:text-sm text-gray-500">Materi · Latihan · Simulasi Matematika SD</p>
      </div>
      <nav class="hidden sm:flex items-center gap-2">
        <button data-tab="materi" class="tab-btn btn px-3 py-2 rounded-xl bg-emerald-600 text-white text-sm font-medium shadow hover:shadow-md">Materi</button>
        <button data-tab="latihan" class="tab-btn btn px-3 py-2 rounded-xl bg-white text-gray-700 text-sm font-medium border chip hover:bg-gray-50">Latihan Soal</button>
        <button data-tab="simulasi" class="tab-btn btn px-3 py-2 rounded-xl bg-white text-gray-700 text-sm font-medium border chip hover:bg-gray-50">Simulasi TKA</button>
      </nav>
    </div>
  </header>

  <!-- Mobile Tab Switcher -->
  <div class="sm:hidden sticky top-[60px] z-30 bg-white/80 backdrop-blur border-b border-emerald-100/60">
    <div class="max-w-6xl mx-auto px-4 py-2 grid grid-cols-3 gap-2">
      <button data-tab="materi" class="tab-btn btn py-2 rounded-lg bg-emerald-600 text-white text-xs font-semibold">Materi</button>
      <button data-tab="latihan" class="tab-btn btn py-2 rounded-lg bg-white border chip text-xs font-semibold">Latihan</button>
      <button data-tab="simulasi" class="tab-btn btn py-2 rounded-lg bg-white border chip text-xs font-semibold">Simulasi</button>
    </div>
  </div>

  <main class="max-w-6xl mx-auto px-4 sm:px-6 py-6">
    <!-- Info links to Pusmendik -->
    
    <!-- Tabs content wrapper -->
    <section id="tab-materi" class="tab-pane">
      <div class="grid md:grid-cols-3 gap-4">
        <div class="md:col-span-1 space-y-4">
          <div class="p-4 rounded-2xl bg-white border border-emerald-100 shadow-sm">
            <h2 class="font-bold text-lg">Pilih Materi</h2>
            <label class="block mt-3 text-sm">Mata Pelajaran</label>
            <select id="materiMapel" class="w-full mt-1 px-3 py-2 rounded-xl border chip focus:outline-none focus:ring-2 focus:ring-emerald-300">
              <!-- Diisi via JS -->
            </select>
            <label class="block mt-3 text-sm">Bab</label>
            <select id="materiBab" class="w-full mt-1 px-3 py-2 rounded-xl border chip focus:outline-none focus:ring-2 focus:ring-emerald-300">
            </select>
            <button id="btnLoadMateri" class="btn mt-4 w-full py-2 rounded-xl bg-emerald-600 text-white font-semibold">Tampilkan</button>
          </div>
	</div>

        <div class="md:col-span-2 space-y-4">
          <div class="p-5 rounded-2xl bg-white border border-emerald-100 shadow-sm">
            <h2 class="font-bold text-xl flex items-center gap-2">📘 Ringkasan Materi</h2>
            <div id="materiKonten" class="prose prose-sm sm:prose lg:prose-lg max-w-none mt-3"></div>
          </div>
          <div class="p-5 rounded-2xl bg-white border border-emerald-100 shadow-sm">
            <h2 class="font-bold text-xl flex items-center gap-2">🎬 Video Pembelajaran</h2>
            <div id="materiVideo" class="w-full space-y-4">
  <span class="text-sm text-gray-400">Pilih materi untuk memuat video…</span>
</div>

          </div>
        </div>
      </div>
    </section>

    <section id="tab-latihan" class="tab-pane hidden">
      <div class="grid md:grid-cols-3 gap-4">
        <div class="md:col-span-1 p-4 rounded-2xl bg-white border border-emerald-100 shadow-sm">
          <h2 class="font-bold text-lg">Pengaturan Latihan</h2>
          <label class="block mt-3 text-sm">Mata Pelajaran</label>
          <select id="latihMapel" class="w-full mt-1 px-3 py-2 rounded-xl border chip focus:outline-none focus:ring-2 focus:ring-emerald-300"></select>
          <label class="block mt-3 text-sm">Bab</label>
          <select id="latihBab" class="w-full mt-1 px-3 py-2 rounded-xl border chip focus:outline-none focus:ring-2 focus:ring-emerald-300"></select>
          <button id="btnLoadLatihan" class="btn mt-4 w-full py-2 rounded-xl bg-emerald-600 text-white font-semibold">Muat Soal</button>
        </div>
        <div class="md:col-span-2 p-4 rounded-2xl bg-white border border-emerald-100 shadow-sm">
          <div class="flex items-center justify-between">
            <h2 class="font-bold text-xl">Latihan Soal</h2>
            <button id="btnPeriksaSemua" class="btn px-3 py-2 rounded-xl border chip text-sm">Cek Semua</button>
          </div>
          <div id="latihanContainer" class="mt-3 space-y-4"></div>
        </div>
      </div>
    </section>

    <section id="tab-simulasi" class="tab-pane hidden">
      <div class="grid md:grid-cols-3 gap-4">
        <div class="md:col-span-1 p-4 rounded-2xl bg-white border border-emerald-100 shadow-sm">
          <h2 class="font-bold text-lg">Pengaturan Simulasi</h2>
          <label class="block mt-3 text-sm">Mata Pelajaran</label>
          <select id="simMapel" class="w-full mt-1 px-3 py-2 rounded-xl border chip"></select>
          <label class="block mt-3 text-sm">Jumlah Soal</label>
          <input id="simJumlah" type="number" min="5" max="50" value="10" class="w-full mt-1 px-3 py-2 rounded-xl border chip" />
          <label class="block mt-3 text-sm">Durasi (menit)</label>
          <input id="simDurasi" type="number" min="5" max="180" value="15" class="w-full mt-1 px-3 py-2 rounded-xl border chip" />
          <button id="btnMulaiSim" class="btn mt-4 w-full py-2 rounded-xl bg-emerald-600 text-white font-semibold">Mulai Simulasi</button>
          <p class="text-xs text-gray-500 mt-2">Timer akan berjalan. Skor & pembahasan ditampilkan setelah selesai.</p>
        </div>
        <div class="md:col-span-2 p-4 rounded-2xl bg-white border border-emerald-100 shadow-sm">
          <div class="flex items-center justify-between">
            <h2 class="font-bold text-xl">Simulasi TKA</h2>
            <div id="simInfo" class="text-sm text-gray-600">Belum mulai</div>
          </div>
          <div id="simContainer" class="mt-3 space-y-4"></div>
          <div id="simHasil" class="mt-4 hidden p-4 rounded-xl border chip bg-emerald-50"></div>
        </div>
      </div>
    </section>
  </main>

  <footer class="max-w-6xl mx-auto px-4 sm:px-6 pb-10">
    <div class="mt-10 p-4 rounded-2xl bg-white border border-emerald-100 shadow-sm text-xs text-gray-500">
      <p><strong>Kebun Ilmu</strong> – Aplikasi belajar mandiri. Konten ringkasan & soal di sini adalah contoh yang disusun menyerupai format TKA. Untuk rujukan resmi gunakan tautan Pusmendik di atas.</p>
    </div>
  </footer>

  <!-- App Data & Logic -->
  <script>
  // ======= Dataset Contoh (DISERAGAMKAN DENGAN TKA SMA) =======
  // Struktur: mapel -> bab[] -> materi (html), video (YT embed id), soal[]
  const DB = {
'English': {
  bab: {
    'I Like Mi Aceh': {
      materi: `
<h2 class="text-xl font-bold mb-2">I Like Mi Aceh</h2>
<p>
  In this lesson, students will learn how to mention food and drinks and express likes and dislikes.
</p>

<h3 class="text-lg font-semibold mt-4">1. Food and Drink Vocabulary</h3>
<ul class="list-disc ml-6 mb-4">
  <li>Fried chicken (Ayam goreng)</li>
  <li>Noodle (Mi)</li>
  <li>Rice (Nasi)</li>
  <li>Meatball (Bakso)</li>
  <li>Tea (Teh)</li>
  <li>Milk (Susu)</li>
  <li>Juice (Jus)</li>
</ul>

<h3 class="text-lg font-semibold mt-4">2. Expressing Likes and Dislikes</h3>
<ul class="list-disc ml-6 mb-4">
  <li>I like fried chicken. (Saya suka ayam goreng.)</li>
  <li>You like noodle. (Kamu suka mi.)</li>
  <li>I don’t like meatball. (Saya tidak suka bakso.)</li>
  <li>Do you like rice? (Apakah kamu suka nasi?)</li>
  <li>Yes, I like it. / No, I don’t like it.</li>
</ul>

<h3 class="text-lg font-semibold mt-4">3. Examples</h3>
<p>
  - I like Mi Aceh.  
  - I don’t like bakso.  
  - Do you like fried chicken? Yes, I like it.
</p>

<h3 class="text-lg font-semibold mt-4">4. Contoh Soal</h3>
<p><b>Contoh 1 (PG):</b> I ___ fried chicken. (Jawab: like)</p>
<p><b>Contoh 2 (PG):</b> Do you ___ noodle? (Jawab: like)</p>
<p><b>Contoh 3 (Isian):</b> I don’t like _____. (Jawab: meatball)</p>
`,
      video: ['dQw4w9WgXcQ'], // contoh video

      soal: [
        {
          id: "mi1",
          tipe: "pg",
          bacaan: "Dialog:\nA: Do you like Mi Aceh?\nB: Yes, ....",
          tanya: "Which is the correct response?",
          opsi: [
            "Yes, I like it.",
            "Yes, I liking it.",
            "No, I like it.",
            "Yes, I do like it."
          ],
          kunci: 0,
          bahas: "The correct answer is 'Yes, I like it.' to express liking."
        },
        {
          id: "mi2",
          tipe: "cb",
          bacaan: "Choose all foods you can express you like:",
          opsi: [
            "I like fried chicken.",
            "I like noodle.",
            "I don’t like rice.",
            "I don’t like milk."
          ],
          kunci: [0,1],
          bahas: "'I like fried chicken.' and 'I like noodle.' express liking foods."
        },
        {
          id: "mi3",
          tipe: "tf",
          tanya: "Decide True or False:",
          opsi: [
            "I like means saya suka.",
            "I don’t like means saya suka.",
            "Do you like …? is a question."
          ],
          kunci: [true, false, true],
          bahas: "1. True, 'I like' = saya suka. 2. False, 'I don’t like' = saya tidak suka. 3. True, 'Do you like…?' is a question."
        },
        {
          id: "mi4",
          tipe: "isian",
          bacaan: "Dialog:\nA: Do you like meatball?\nB: No, ....",
          tanya: "Complete the response correctly.",
          kunciText: "I don’t like it",
          bahas: "The correct response is 'No, I don’t like it.'"
        },
        {
          id: "mi5",
          tipe: "pg",
          bacaan: "Dialog:\n\nA: Do you like rice?\nB: Yes, I like it.\nA: Do you like fried chicken?\nB: Yes, I like it too.\nA: Do you like bakso?\nB: No, I don’t like it.",
          tanya: "Which foods does B like?",
          opsi: [
            "Rice and bakso",
            "Rice and fried chicken",
            "Fried chicken and bakso",
            "Bakso only"
          ],
          kunci: 1,
          bahas: "B likes rice and fried chicken, but not bakso."
        },
        {
          id: "mi6",
          tipe: "cb",
          bacaan: "Choose all correct sentences expressing dislikes:",
          opsi: [
            "I like fried chicken.",
            "I don’t like bakso.",
            "I like juice.",
            "I don’t like noodle."
          ],
          kunci: [1,3],
          bahas: "'I don’t like bakso.' and 'I don’t like noodle.' show dislikes."
        },
        {
          id: "mi7",
          tipe: "tf",
          bacaan: "Dialog:\n\nA: Do you like milk?\nB: No, I don’t like it.",
          tanya: "Decide True or False:",
          opsi: [
            "B likes milk.",
            "B doesn’t like milk."
          ],
          kunci: [false, true],
          bahas: "B clearly says he/she doesn’t like milk."
        },
        {
          id: "mi8",
          tipe: "isian",
          bacaan: "Dialog:\n\nA: What do you like?\nB: I like ... and ...",
          tanya: "Mention two foods B likes.",
          kunciText: "fried chicken and noodle",
          bahas: "From the dialog, B likes fried chicken and noodle."
        }
      ]
    }
  }
},

'IPAS': {
  bab: {
    'Panca Indra': {
      materi: `
<h2 class="text-xl font-bold mb-2">Panca Indra Manusia</h2>
<p>
  Panca indra adalah lima alat tubuh manusia yang berfungsi untuk menerima rangsangan dari lingkungan sekitar. 
  Panca indra terdiri dari indra penglihatan, pendengaran, penciuman, perasa, dan peraba. 
  Masing-masing indra memiliki organ khusus dan fungsi yang berbeda.
</p>

<h3 class="text-lg font-semibold mt-4">1. Indra Penglihatan (Mata)</h3>
<p>
  Mata berfungsi untuk melihat bentuk, warna, dan cahaya. Bagian penting pada mata antara lain kornea, lensa, retina, dan pupil. 
  Cahaya yang masuk ke mata difokuskan oleh lensa ke retina, lalu diteruskan ke otak melalui saraf optik.
</p>

<h3 class="text-lg font-semibold mt-4">2. Indra Pendengaran (Telinga)</h3>
<p>
  Telinga berfungsi untuk mendengar bunyi dan menjaga keseimbangan tubuh. Bunyi masuk melalui telinga luar, 
  diteruskan ke gendang telinga, lalu ke tulang pendengaran, dan akhirnya ke rumah siput (koklea) sebelum diteruskan ke otak.
</p>

<h3 class="text-lg font-semibold mt-4">3. Indra Penciuman (Hidung)</h3>
<p>
  Hidung berfungsi untuk mencium bau. Di dalam rongga hidung terdapat sel reseptor penciuman yang peka terhadap zat kimia yang larut dalam udara.
</p>

<h3 class="text-lg font-semibold mt-4">4. Indra Perasa (Lidah)</h3>
<p>
  Lidah berfungsi untuk merasakan rasa makanan dan minuman. Pada permukaan lidah terdapat bintil pengecap yang dapat merasakan 
  lima rasa utama: manis, asin, asam, pahit, dan umami.
</p>

<h3 class="text-lg font-semibold mt-4">5. Indra Peraba (Kulit)</h3>
<p>
  Kulit berfungsi untuk merasakan sentuhan, tekanan, suhu, dan nyeri. Kulit juga melindungi tubuh dari kuman dan lingkungan luar.
</p>

<h3 class="text-lg font-semibold mt-4">6. Contoh Soal</h3>
<p><b>Contoh 1:</b> Organ tubuh yang berfungsi untuk menerima rangsangan cahaya adalah .... <i>Jawab: Mata</i>.</p>
<p><b>Contoh 2:</b> Lidah dapat merasakan lima rasa utama, yaitu .... <i>Jawab: manis, asin, asam, pahit, dan umami</i>.</p>
`,
      video: ['OgeKjOx2F2M'], 

      soal: [
{
  id: "pi1",
  tipe: "pg",
  bacaan: "Mata adalah salah satu panca indra manusia.",
  tanya: "Apa fungsi mata?",
  opsi: [
    "Untuk mendengar",
    "Untuk melihat",
    "Untuk mencium",
    "Untuk meraba"
  ],
  kunci: 1,
  bahas: "Mata berfungsi sebagai indra penglihatan untuk melihat."
},
{
  id: "pi2",
  tipe: "cb",
  bacaan: "Panca indra membantu manusia mengenali lingkungan sekitarnya.",
  tanya: "Manakah yang termasuk panca indra?(Pilih semua jawaban yang benar)",
  opsi: [
    "Mata",
    "Telinga",
    "Hidung",
    "Lidah",
    "Kaki"
  ],
  kunci: [0,1,2,3],
  bahas: "Panca indra terdiri dari mata, telinga, hidung, lidah, dan kulit."
},
{
  id: "pi3",
  tipe: "bs",
  bacaan: "Kulit adalah indra peraba manusia.",
  tanya: "Tentukan benar atau salah pernyataan berikut.",
  opsi: [
    "Kulit dapat merasakan panas dan dingin.",
    "Kulit berfungsi untuk mencium bau."
  ],
  kunci: [true, false],
  bahas: "Kulit berfungsi sebagai indra peraba (benar), bukan untuk mencium bau (salah)."
},
{
  id: "pi4",
  tipe: "isian",
  bacaan: "Lidah dapat merasakan berbagai rasa makanan dan minuman.",
  tanya: "Indra apa yang digunakan untuk merasakan asin, manis, pahit, dan asam?",
  kunciText: "lidah",
  bahas: "Lidah adalah indra perasa yang berfungsi merasakan rasa makanan dan minuman."
},

        // Pilihan Ganda (PG)
        {
          id: 'pi5',
          tipe: 'pg',
          tanya: 'Organ yang berfungsi untuk mendeteksi cahaya dan warna adalah ....',
          opsi: [
            'Telinga',
            'Mata',
            'Hidung',
            'Kulit'
          ],
          kunci: 2,
          bahas: 'Mata adalah organ penglihatan yang berfungsi untuk menangkap cahaya dan warna.'
        },

        // Check Box (CB)
        {
          id: 'pi6',
          tipe: 'cb',
          tanya: 'Manakah yang termasuk panca indra manusia?',
          opsi: [
            'Mata',
            'Hidung',
            'Jantung',
            'Lidah',
            'Kulit'
          ],
          kunci: [0,1,3,4],
          bahas: 'Panca indra terdiri dari mata, telinga, hidung, lidah, dan kulit. Jantung bukan indra, melainkan organ peredaran darah.'
        },

        // Benar/Salah (BS)
        {
          id: 'pi7',
          tipe: 'bs',
          tanya: 'Tentukan benar (B) atau salah (S) pernyataan berikut terkait panca indra:',
          opsi: [
            'Kulit berfungsi untuk merasakan panas, dingin, dan sentuhan',
            'Hidung berfungsi untuk mendengar bunyi',
            'Lidah memiliki bintil pengecap yang merasakan rasa makanan',
            'Telinga juga berperan dalam menjaga keseimbangan tubuh'
          ],
          kunci: [true,false,true,true],
          bahas: 'Kulit berfungsi merasakan sentuhan, suhu, dan nyeri (benar). Hidung berfungsi mencium, bukan mendengar (salah). Lidah merasakan rasa melalui bintil pengecap (benar). Telinga membantu keseimbangan tubuh (benar).'
        },

        // Isian
        {
          id: 'pi8',
          tipe: 'isian',
          tanya: 'Indra yang berfungsi untuk mencium bau adalah ....',
          kunciText: 'hidung',
          bahas: 'Hidung adalah organ penciuman yang berfungsi mendeteksi bau di udara.'
        },
{
  id: "pi9",
  tipe: "pg",
  bacaan: "Setiap panca indra memiliki fungsi yang berbeda-beda.",
  tanya: "Indra apa yang digunakan untuk mendengar suara guru di kelas?",
  opsi: [
    "Mata",
    "Hidung",
    "Telinga",
    "Lidah"
  ],
  kunci: 2,
  bahas: "Telinga adalah indra pendengaran yang digunakan untuk mendengar suara."
},
{
  id: "pi10",
  tipe: "cb",
  bacaan: "Panca indra membantu manusia dalam kehidupan sehari-hari.",
  tanya: "Manakah kegiatan berikut yang menggunakan mata?",
  opsi: [
    "Membaca buku",
    "Mendengarkan musik",
    "Melihat televisi",
    "Mencium bunga"
  ],
  kunci: [0,2],
  bahas: "Membaca buku dan melihat televisi menggunakan mata. Mendengarkan musik dengan telinga, mencium bunga dengan hidung."
},
{
  id: "pi11",
  tipe: "bs",
  bacaan: "Setiap indra memiliki fungsi khusus.",
  tanya: "Tentukan benar (True) atau salah (False) pernyataan berikut.",
  opsi: [
    "Lidah berfungsi untuk merasakan rasa makanan.",
    "Hidung digunakan untuk melihat warna bunga.",
    "Telinga berfungsi mendengar suara.",
    "Kulit digunakan untuk meraba benda."
  ],
  kunci: [true, false, true, true],
  bahas: "Lidah untuk rasa (benar). Hidung tidak untuk melihat (salah). Telinga untuk mendengar (benar). Kulit untuk meraba (benar)."
},
{
  id: "pi12",
  tipe: "isian",
  bacaan: "Ketika kamu mencium bau harum bunga mawar, indra yang digunakan adalah ....",
  tanya: "Lengkapilah jawaban berikut dengan nama indra yang tepat!",
  kunciText: "hidung",
  bahas: "Hidung adalah indra penciuman yang berfungsi untuk mencium bau."
},
{
  id: "pi13",
  tipe: "pg",
  bacaan: "Ani sedang makan es krim cokelat. Ia merasakan rasa manis pada lidahnya.",
  tanya: "Indra apa yang digunakan Ani untuk merasakan manis?",
  opsi: [
    "Mata",
    "Lidah",
    "Hidung",
    "Kulit"
  ],
  kunci: 1,
  bahas: "Lidah adalah indra perasa yang digunakan untuk merasakan manis, asin, asam, pahit, dan umami."
},
{
  id: "pi14",
  tipe: "cb",
  bacaan: "Perhatikan kegiatan berikut:\n1. Mendengar suara musik\n2. Membaca cerita di buku\n3. Mencium aroma masakan\n4. Menyentuh benda panas",
  tanya: "Manakah pasangan yang sesuai antara kegiatan dengan indra yang digunakan?",
  opsi: [
    "1 dengan telinga",
    "2 dengan mata",
    "3 dengan kulit",
    "4 dengan hidung"
  ],
  kunci: [0,1],
  bahas: "Mendengar musik dengan telinga (benar), membaca dengan mata (benar), mencium aroma dengan hidung (bukan kulit), menyentuh panas dengan kulit (bukan hidung)."
},
{
  id: "pi15",
  tipe: "bs",
  bacaan: "Perhatikan pernyataan berikut tentang panca indra.",
  tanya: "Tentukan benar (True) atau salah (False).",
  opsi: [
    "Mata digunakan untuk melihat gambar di papan tulis.",
    "Telinga digunakan untuk mencium bau makanan.",
    "Kulit dapat merasakan dinginnya es.",
    "Lidah digunakan untuk mendengar suara."
  ],
  kunci: [true, false, true, false],
  bahas: "Mata untuk melihat (benar). Telinga tidak untuk mencium (salah). Kulit merasakan suhu (benar). Lidah tidak untuk mendengar (salah)."
},
{
  id: "pi16",
  tipe: "isian",
  bacaan: "Ketika kamu menyentuh air panas, indra yang digunakan adalah ....",
  tanya: "Isi dengan nama indra yang tepat!",
  kunciText: "kulit",
  bahas: "Kulit adalah indra peraba yang berfungsi merasakan panas, dingin, sentuhan, dan nyeri."
},
{
  id: "pi17",
  tipe: "pg",
  bacaan: "Bayu menutup matanya lalu mencoba menebak jenis buah hanya dengan mencium aromanya. Ia berhasil menebak buah jeruk.",
  tanya: "Indra apa yang digunakan Bayu untuk menebak buah tersebut?",
  opsi: [
    "Mata",
    "Hidung",
    "Lidah",
    "Kulit"
  ],
  kunci: 1,
  bahas: "Bayu menggunakan hidung (indra penciuman) untuk mengenali bau jeruk meskipun matanya tertutup."
},
{
  id: "pi18",
  tipe: "cb",
  bacaan: "Siti berada di dapur. Ia mencium bau gosong, mendengar bunyi alarm kompor, dan melihat asap keluar dari panci.",
  tanya: "Indra apa saja yang digunakan Siti dalam peristiwa tersebut?",
  opsi: [
    "Mata",
    "Telinga",
    "Hidung",
    "Lidah",
    "Kulit"
  ],
  kunci: [0,1,2],
  bahas: "Siti menggunakan hidung untuk mencium bau gosong, telinga untuk mendengar bunyi alarm, dan mata untuk melihat asap."
},
{
  id: "pi19",
  tipe: "bs",
  bacaan: "Perhatikan pernyataan berikut tentang kegiatan sehari-hari.",
  tanya: "Tentukan benar (True) atau salah (False).",
  opsi: [
    "Saat makan sup panas, kita menggunakan lidah untuk merasakan rasa dan kulit untuk merasakan panas.",
    "Saat menonton televisi, kita hanya menggunakan telinga.",
    "Ketika mengendarai sepeda di jalan, kita menggunakan mata, telinga, dan kulit.",
    "Saat mencium bunga mawar, kita menggunakan telinga."
  ],
  kunci: [true, false, true, false],
  bahas: "Makan sup melibatkan lidah (rasa) dan kulit (panas). Menonton TV menggunakan mata dan telinga (bukan hanya telinga). Mengendarai sepeda perlu mata, telinga, dan kulit. Mencium bunga dengan hidung, bukan telinga."
},
{
  id: "pi20",
  tipe: "isian",
  bacaan: "Ketika listrik padam malam hari, kamu mendengar suara jangkrik di kebun, mencium aroma masakan dari dapur, dan merasakan udara dingin. Indra yang kamu gunakan antara lain telinga, hidung, dan ....",
  tanya: "Lengkapilah dengan indra yang tepat!",
  kunciText: "kulit",
  bahas: "Dalam kondisi gelap, kita masih bisa menggunakan telinga untuk mendengar, hidung untuk mencium bau, dan kulit untuk merasakan suhu."
},
// Literasi Membaca
{
  id: "pi21",
  tipe: "pg",
  bacaan: "Teks:\n\nPancaindra membantu manusia mengenali lingkungan sekitarnya. Mata digunakan untuk melihat, telinga untuk mendengar, hidung untuk mencium bau, lidah untuk merasakan rasa, dan kulit untuk merasakan sentuhan, panas, dingin, serta nyeri.",
  tanya: "Menurut teks, indra apa yang berfungsi untuk merasakan suhu panas dan dingin?",
  opsi: [
    "Mata",
    "Kulit",
    "Hidung",
    "Lidah"
  ],
  kunci: 1,
  bahas: "Dari teks, kulit berfungsi untuk merasakan suhu panas dan dingin."
},

// Numerasi
{
  id: "pi22",
  tipe: "isian",
  bacaan: "Dalam sebuah kelas, 12 siswa menyebutkan indra favorit mereka.\n- 4 siswa memilih mata\n- 3 siswa memilih telinga\n- 2 siswa memilih lidah\n- 3 siswa memilih kulit",
  tanya: "Berapa banyak siswa yang memilih mata dan telinga sebagai indra favorit?",
  kunciText: "7",
  bahas: "Jumlah siswa yang memilih mata (4) ditambah telinga (3) = 7 siswa."
},

// Sains
{
  id: "pi23",
  tipe: "cb",
  bacaan: "Ketika Dina bermain di taman, ia melihat kupu-kupu berwarna indah, mencium bau bunga, dan mendengar kicauan burung.",
  tanya: "Indra apa saja yang digunakan Dina saat itu?",
  opsi: [
    "Mata",
    "Telinga",
    "Hidung",
    "Lidah",
    "Kulit"
  ],
  kunci: [0,1,2],
  bahas: "Dina menggunakan mata untuk melihat kupu-kupu, hidung untuk mencium bau bunga, dan telinga untuk mendengar kicauan burung."
},

// Sosial Budaya
{
  id: "pi24",
  tipe: "bs",
  bacaan: "Di pasar tradisional, pancaindra digunakan untuk berbagai hal. Mata melihat barang dagangan, hidung mencium aroma makanan, lidah mencicipi rasa makanan, telinga mendengar suara pedagang, dan kulit merasakan udara panas.",
  tanya: "Tentukan benar (True) atau salah (False) pernyataan berikut.",
  opsi: [
    "Di pasar, mata digunakan untuk menawar harga barang.",
    "Hidung dapat mencium aroma makanan yang dijual.",
    "Kulit bisa merasakan udara panas di sekitar pasar."
  ],
  kunci: [false, true, true],
  bahas: "Menawar harga dilakukan dengan berbicara, bukan dengan mata (salah). Hidung mencium aroma makanan (benar). Kulit merasakan udara panas (benar)."
},
{
  id: "pi25",
  tipe: "pg",
  bacaan: "Teks:\n\nPemerintah daerah bersama rumah sakit dan lembaga sosial mengadakan program operasi katarak gratis bagi masyarakat kurang mampu. Banyak warga lansia yang sebelumnya sulit melihat, kini bisa kembali menikmati keindahan dunia. Operasi ini dilakukan oleh dokter spesialis mata dengan peralatan modern agar hasilnya lebih maksimal.\n\nKatarak adalah penyakit pada mata yang membuat lensa menjadi keruh, sehingga penglihatan penderita menjadi buram. Dengan adanya operasi, lensa yang keruh diganti sehingga penderita bisa melihat jelas kembali. Program ini sangat membantu meningkatkan kualitas hidup masyarakat, terutama yang bergantung pada penglihatan untuk bekerja dan beraktivitas sehari-hari.",
  tanya: "Indra apa yang dipulihkan fungsinya melalui operasi katarak?",
  opsi: [
    "Indra pendengaran",
    "Indra peraba",
    "Indra penglihatan",
    "Indra penciuman"
  ],
  kunci: 2,
  bahas: "Operasi katarak bertujuan memulihkan fungsi mata, yaitu indra penglihatan."
},

{
  id: "pi26",
  tipe: "cb",
  bacaan: "Teks:\n\nPemerintah daerah bersama rumah sakit dan lembaga sosial mengadakan program operasi katarak gratis bagi masyarakat kurang mampu. Banyak warga lansia yang sebelumnya sulit melihat, kini bisa kembali menikmati keindahan dunia. Operasi ini dilakukan oleh dokter spesialis mata dengan peralatan modern agar hasilnya lebih maksimal.\n\nKatarak adalah penyakit pada mata yang membuat lensa menjadi keruh, sehingga penglihatan penderita menjadi buram. Dengan adanya operasi, lensa yang keruh diganti sehingga penderita bisa melihat jelas kembali. Program ini sangat membantu meningkatkan kualitas hidup masyarakat, terutama yang bergantung pada penglihatan untuk bekerja dan beraktivitas sehari-hari.",
  tanya: "Apa dampak positif operasi katarak bagi penderita?",
  opsi: [
    "Mereka dapat melihat dengan jelas kembali",
    "Mereka dapat kembali beraktivitas normal",
    "Mereka kehilangan kemampuan mencium bau",
    "Mereka dapat menikmati keindahan dunia",
    "Mereka bisa mendengar lebih baik"
  ],
  kunci: [0,1,3],
  bahas: "Operasi katarak memulihkan penglihatan, membuat penderita bisa beraktivitas normal kembali, dan menikmati keindahan dunia."
},

{
  id: "pi27",
  tipe: "bs",
  bacaan: "Teks:\n\nPemerintah daerah bersama rumah sakit dan lembaga sosial mengadakan program operasi katarak gratis bagi masyarakat kurang mampu. Banyak warga lansia yang sebelumnya sulit melihat, kini bisa kembali menikmati keindahan dunia. Operasi ini dilakukan oleh dokter spesialis mata dengan peralatan modern agar hasilnya lebih maksimal.\n\nKatarak adalah penyakit pada mata yang membuat lensa menjadi keruh, sehingga penglihatan penderita menjadi buram. Dengan adanya operasi, lensa yang keruh diganti sehingga penderita bisa melihat jelas kembali. Program ini sangat membantu meningkatkan kualitas hidup masyarakat, terutama yang bergantung pada penglihatan untuk bekerja dan beraktivitas sehari-hari.",
  tanya: "Tentukan benar (True) atau salah (False) pernyataan berikut.",
  opsi: [
    "Katarak adalah penyakit pada mata yang membuat lensa keruh.",
    "Operasi katarak dapat memulihkan fungsi indra penglihatan.",
    "Operasi katarak membuat pendengaran lebih tajam."
  ],
  kunci: [true, true, false],
  bahas: "Katarak menyerang mata (benar), operasi mengembalikan penglihatan (benar), tetapi tidak ada hubungannya dengan pendengaran (salah)."
},

{
  id: "pi28",
  tipe: "isian",
  bacaan: "Teks:\n\nPemerintah daerah bersama rumah sakit dan lembaga sosial mengadakan program operasi katarak gratis bagi masyarakat kurang mampu. Banyak warga lansia yang sebelumnya sulit melihat, kini bisa kembali menikmati keindahan dunia. Operasi ini dilakukan oleh dokter spesialis mata dengan peralatan modern agar hasilnya lebih maksimal.\n\nKatarak adalah penyakit pada mata yang membuat lensa menjadi keruh, sehingga penglihatan penderita menjadi buram. Dengan adanya operasi, lensa yang keruh diganti sehingga penderita bisa melihat jelas kembali. Program ini sangat membantu meningkatkan kualitas hidup masyarakat, terutama yang bergantung pada penglihatan untuk bekerja dan beraktivitas sehari-hari.",
  tanya: "Katarak membuat lensa mata menjadi ______.",
  kunciText: "keruh",
  bahas: "Katarak membuat lensa mata menjadi keruh sehingga penglihatan buram."
},
      ]
    },
"Pengelompokan Hewan": {
    materi: `
<h2 class="text-xl font-bold mb-2">Pengelompokan Hewan</h2>
<p>
  Hewan dapat dikelompokkan berdasarkan berbagai kriteria, misalnya jenis makanannya, tempat hidupnya, 
  atau jenis tulangnya. Dengan pengelompokan ini, kita dapat mempelajari ciri dan peran hewan lebih mudah.
</p>

<h3 class="text-lg font-semibold mt-4">1. Berdasarkan Jenis Makanannya</h3>
<p>
  Hewan dibagi menjadi tiga kelompok:
  <ul class="list-disc ml-6">
    <li><b>Herbivora</b> → hewan pemakan tumbuhan, contohnya sapi, kambing, dan kelinci.</li>
    <li><b>Karnivora</b> → hewan pemakan daging, contohnya singa, harimau, dan elang.</li>
    <li><b>Omnivora</b> → hewan pemakan segala, contohnya ayam, beruang, dan manusia.</li>
  </ul>
</p>

<h3 class="text-lg font-semibold mt-4">2. Berdasarkan Tempat Hidupnya</h3>
<p>
  Hewan juga dapat dikelompokkan menurut habitatnya:
  <ul class="list-disc ml-6">
    <li><b>Hewan darat</b> → misalnya gajah, kuda, dan kucing.</li>
    <li><b>Hewan air</b> → misalnya ikan, lumba-lumba, dan paus.</li>
    <li><b>Hewan amfibi</b> → hidup di darat dan air, misalnya katak dan salamander.</li>
  </ul>
</p>

<h3 class="text-lg font-semibold mt-4">3. Berdasarkan Ada Tidaknya Tulang Belakang</h3>
<p>
  Hewan terbagi menjadi:
  <ul class="list-disc ml-6">
    <li><b>Vertebrata</b> (bertulang belakang), contohnya burung, reptil, ikan, amfibi, dan mamalia.</li>
    <li><b>Invertebrata</b> (tidak bertulang belakang), contohnya serangga, cacing, ubur-ubur, dan cumi-cumi.</li>
  </ul>
</p>

<h3 class="text-lg font-semibold mt-4">4. Contoh Soal</h3>
<p><b>Contoh 1:</b> Hewan pemakan tumbuhan disebut .... <i>Jawab: Herbivora</i>.</p>
<p><b>Contoh 2:</b> Katak termasuk kelompok hewan .... <i>Jawab: Amfibi</i>.</p>
`,
    video: ["jM5D9iRk0LQ"],

    soal: [
      {
        id: "ph1",
        tipe: "pg",
        bacaan: "Sapi adalah hewan pemakan tumbuhan.",
        tanya: "Sapi termasuk jenis hewan apa?",
        opsi: ["Karnivora", "Omnivora", "Herbivora", "Invertebrata"],
        kunci: 2,
        bahas: "Sapi termasuk herbivora karena makanannya berupa tumbuhan."
      },
      {
        id: "ph2",
        tipe: "cb",
        bacaan: "Perhatikan hewan berikut: ayam, singa, kambing, dan kucing.",
        tanya: "Manakah hewan yang termasuk omnivora? (Pilih semua jawaban yang benar)",
        opsi: ["Ayam", "Singa", "Kambing", "Kucing"],
        kunci: [0],
        bahas: "Ayam termasuk omnivora karena memakan biji-bijian dan serangga. Yang lain bukan."
      },
      {
        id: "ph3",
        tipe: "bs",
        bacaan: "Katak dapat hidup di darat dan di air.",
        tanya: "Tentukan benar atau salah pernyataan berikut.",
        opsi: [
          "Katak termasuk hewan amfibi.",
          "Katak termasuk hewan karnivora."
        ],
        kunci: [true, true],
        bahas: "Katak benar termasuk amfibi dan juga karnivora karena memangsa serangga."
      },
      {
        id: "ph4",
        tipe: "isian",
        bacaan: "Hewan yang memiliki tulang belakang disebut ....",
        tanya: "Lengkapilah kalimat berikut.",
        kunciText: "vertebrata",
        bahas: "Hewan bertulang belakang disebut vertebrata."
      },
{
  id: "hv1",
  tipe: "pg",
  bacaan: "Burung merpati adalah salah satu hewan yang memiliki tulang belakang.",
  tanya: "Burung merpati termasuk kelompok hewan apa?",
  opsi: ["Invertebrata", "Vertebrata", "Amfibi", "Serangga"],
  kunci: 1,
  bahas: "Burung merpati termasuk kelompok vertebrata karena memiliki tulang belakang."
},
{
  id: "hv2",
  tipe: "cb",
  bacaan: "Perhatikan hewan berikut: ikan, katak, ular, dan kupu-kupu.",
  tanya: "Manakah yang termasuk hewan vertebrata? (Pilih semua jawaban yang benar)",
  opsi: ["Ikan", "Katak", "Ular", "Kupu-kupu"],
  kunci: [0,1,2],
  bahas: "Ikan, katak, dan ular termasuk vertebrata karena bertulang belakang, sedangkan kupu-kupu adalah invertebrata."
},
{
  id: "hv3",
  tipe: "bs",
  bacaan: "Vertebrata terdiri atas lima kelas utama.",
  tanya: "Tentukan benar atau salah pernyataan berikut.",
  opsi: [
    "Mamalia termasuk hewan vertebrata.",
    "Ubur-ubur termasuk hewan vertebrata."
  ],
  kunci: [true, false],
  bahas: "Mamalia termasuk vertebrata (benar), sedangkan ubur-ubur adalah invertebrata (salah)."
},
{
  id: "hv4",
  tipe: "isian",
  bacaan: "Contoh hewan vertebrata yang hidup di air dan memiliki insang adalah ....",
  tanya: "Lengkapilah kalimat berikut.",
  kunciText: "ikan",
  bahas: "Ikan adalah hewan vertebrata yang hidup di air dan bernapas dengan insang."
},
{
  id: "hv5",
  tipe: "pg",
  bacaan: "Lumba-lumba hidup di laut, bernapas dengan paru-paru, dan menyusui anaknya.",
  tanya: "Lumba-lumba termasuk ke dalam kelompok hewan apa?",
  opsi: ["Ikan", "Amfibi", "Mamalia", "Reptil"],
  kunci: 2,
  bahas: "Walaupun hidup di air, lumba-lumba adalah mamalia karena bernapas dengan paru-paru, berdarah panas, dan menyusui anaknya."
},
{
  id: "hv6",
  tipe: "cb",
  bacaan: "Perhatikan ciri berikut: (1) Berdarah dingin, (2) Bernapas dengan insang sepanjang hidup, (3) Jantung terdiri dari dua ruang, (4) Tubuh ditutupi sisik.",
  tanya: "Ciri-ciri tersebut dimiliki oleh kelompok hewan apa? (Pilih semua jawaban yang benar)",
  opsi: ["Ikan", "Amfibi", "Reptil", "Burung"],
  kunci: [0],
  bahas: "Ciri-ciri tersebut sesuai dengan ikan: berdarah dingin, bernapas dengan insang, jantung dua ruang, tubuh bersisik."
},
{
  id: "hv7",
  tipe: "bs",
  bacaan: "Amfibi merupakan salah satu kelas vertebrata yang unik.",
  tanya: "Tentukan benar atau salah pernyataan berikut.",
  opsi: [
    "Katak bernapas dengan insang pada fase larva dan paru-paru pada fase dewasa.",
    "Amfibi berdarah panas."
  ],
  kunci: [true, false],
  bahas: "Katak benar bernapas dengan insang saat berudu dan paru-paru saat dewasa (benar). Amfibi justru berdarah dingin, bukan berdarah panas (salah)."
},
{
  id: "hv8",
  tipe: "isian",
  bacaan: "Hewan vertebrata yang memiliki tubuh ditutupi bulu dan berkembang biak dengan cara bertelur maupun melahirkan adalah ....",
  tanya: "Lengkapilah kalimat berikut.",
  kunciText: "burung",
  bahas: "Burung ditutupi bulu, bernapas dengan paru-paru, dan biasanya berkembang biak dengan bertelur."
},
{
  id: "hi1",
  tipe: "pg",
  bacaan: "Kupu-kupu adalah hewan yang memiliki tubuh beruas dan tidak memiliki tulang belakang.",
  tanya: "Kupu-kupu termasuk kelompok hewan apa?",
  opsi: ["Vertebrata", "Invertebrata", "Amfibi", "Mamalia"],
  kunci: 1,
  bahas: "Kupu-kupu termasuk invertebrata karena tidak memiliki tulang belakang."
},
{
  id: "hi2",
  tipe: "cb",
  bacaan: "Perhatikan hewan berikut: ubur-ubur, belalang, ikan paus, cumi-cumi.",
  tanya: "Manakah yang termasuk hewan invertebrata? (Pilih semua jawaban yang benar)",
  opsi: ["Ubur-ubur", "Belalang", "Ikan paus", "Cumi-cumi"],
  kunci: [0, 1, 3],
  bahas: "Ubur-ubur, belalang, dan cumi-cumi adalah invertebrata. Ikan paus adalah vertebrata (mamalia)."
},
{
  id: "hi3",
  tipe: "bs",
  bacaan: "Invertebrata adalah kelompok hewan yang paling banyak jumlah spesiesnya di bumi.",
  tanya: "Tentukan benar atau salah pernyataan berikut.",
  opsi: [
    "Serangga termasuk invertebrata.",
    "Cacing tanah termasuk vertebrata."
  ],
  kunci: [true, false],
  bahas: "Serangga (benar) termasuk invertebrata, sedangkan cacing tanah juga invertebrata, bukan vertebrata (jadi salah)."
},
{
  id: "hi4",
  tipe: "isian",
  bacaan: "Contoh hewan invertebrata yang memiliki tubuh lunak dan termasuk kelompok moluska adalah ....",
  tanya: "Lengkapilah kalimat berikut.",
  kunciText: "cumi-cumi",
  bahas: "Cumi-cumi adalah contoh invertebrata dari kelompok moluska (hewan bertubuh lunak)."
},
{
  id: "hi5",
  tipe: "pg",
  bacaan: "Bintang laut merupakan hewan laut yang memiliki sistem peredaran air dan simetri tubuh radial.",
  tanya: "Bintang laut termasuk ke dalam kelompok invertebrata apa?",
  opsi: ["Moluska", "Echinodermata", "Cnidaria", "Porifera"],
  kunci: 1,
  bahas: "Bintang laut termasuk Echinodermata karena hidup di laut, simetri radial, dan memiliki sistem peredaran air."
},
{
  id: "hi6",
  tipe: "cb",
  bacaan: "Perhatikan ciri-ciri berikut: (1) Tubuh bersegmen, (2) Memiliki rangka luar (eksoskeleton), (3) Tubuh beruas-ruas, (4) Bernapas dengan insang, trakea, atau paru-paru buku.",
  tanya: "Ciri-ciri tersebut dimiliki oleh kelompok hewan apa? (Pilih semua jawaban yang benar)",
  opsi: ["Arthropoda", "Moluska", "Cnidaria", "Annelida"],
  kunci: [0],
  bahas: "Ciri-ciri tersebut adalah ciri khas Arthropoda, misalnya serangga, laba-laba, dan udang."
},
{
  id: "hi7",
  tipe: "bs",
  bacaan: "Porifera dan Cnidaria adalah hewan invertebrata yang hidup di laut.",
  tanya: "Tentukan benar atau salah pernyataan berikut.",
  opsi: [
    "Porifera memiliki tubuh berpori dan hidup menetap di dasar laut.",
    "Cnidaria memiliki sel penyengat (knidosit) untuk melumpuhkan mangsa."
  ],
  kunci: [true, true],
  bahas: "Porifera benar memiliki tubuh berpori, sedangkan Cnidaria seperti ubur-ubur memiliki sel penyengat (knidosit)."
},
{
  id: "hi8",
  tipe: "isian",
  bacaan: "Hewan invertebrata yang tubuhnya lunak, ada yang bercangkang, dan termasuk kelompok Gastropoda adalah ....",
  tanya: "Lengkapilah kalimat berikut.",
  kunciText: "siput",
  bahas: "Siput adalah contoh moluska dari kelas Gastropoda, tubuh lunak dengan cangkang pelindung."
},

    ]
  },

  "Ciri-Ciri Makhluk Hidup": {
    materi: `
<h2 class="text-xl font-bold mb-2">Ciri-Ciri Makhluk Hidup</h2>
<p>
  Semua makhluk hidup, baik hewan, tumbuhan, maupun manusia, memiliki ciri-ciri khusus yang membedakan mereka dengan benda mati.
</p>

<h3 class="text-lg font-semibold mt-4">1. Bernapas</h3>
<p>
  Bernapas adalah proses mengambil oksigen dari lingkungan dan mengeluarkan karbon dioksida. 
  Semua makhluk hidup membutuhkan oksigen untuk menghasilkan energi.
</p>

<h3 class="text-lg font-semibold mt-4">2. Bergerak</h3>
<p>
  Makhluk hidup mampu bergerak, baik berpindah tempat (misalnya hewan) maupun bergerak sebagian (misalnya tumbuhan membuka stomata).
</p>

<h3 class="text-lg font-semibold mt-4">3. Tumbuh dan Berkembang</h3>
<p>
  Makhluk hidup tumbuh dengan bertambahnya ukuran tubuh, serta berkembang dengan bertambahnya kemampuan fungsi tubuh.
</p>

<h3 class="text-lg font-semibold mt-4">4. Berkembang Biak</h3>
<p>
  Untuk melestarikan jenisnya, makhluk hidup melakukan reproduksi. 
  Ada yang secara seksual (perkawinan), ada juga yang aseksual (tanpa perkawinan).
</p>

<h3 class="text-lg font-semibold mt-4">5. Peka terhadap Rangsang</h3>
<p>
  Makhluk hidup dapat merespons rangsangan dari lingkungan, misalnya manusia menutup mata saat terkena cahaya terang.
</p>

<h3 class="text-lg font-semibold mt-4">6. Mengeluarkan Zat Sisa</h3>
<p>
  Semua makhluk hidup mengeluarkan sisa metabolisme agar tidak meracuni tubuh, contohnya keringat, urine, dan karbon dioksida.
</p>

<h3 class="text-lg font-semibold mt-4">7. Membutuhkan Makanan</h3>
<p>
  Makhluk hidup memerlukan makanan untuk mendapatkan energi dan pertumbuhan. 
  Hewan mendapatkan makanan dari tumbuhan atau hewan lain, sedangkan tumbuhan hijau membuat makanan sendiri dengan fotosintesis.
</p>

<h3 class="text-lg font-semibold mt-4">8. Contoh Soal</h3>
<p><b>Contoh 1:</b> Manusia menghirup oksigen untuk proses .... <i>Jawab: Bernapas</i>.</p>
<p><b>Contoh 2:</b> Tumbuhan membuat makanan sendiri melalui proses .... <i>Jawab: Fotosintesis</i>.</p>
`,
    video: ["dVvCBG60Egc"],

    soal: [
      {
        id: "cm1",
        tipe: "pg",
        bacaan: "Manusia mengeluarkan keringat setelah berlari.",
        tanya: "Peristiwa tersebut menunjukkan ciri makhluk hidup apa?",
        opsi: ["Bernapas", "Mengeluarkan zat sisa", "Tumbuh", "Berkembang biak"],
        kunci: 1,
        bahas: "Mengeluarkan keringat adalah bentuk pengeluaran zat sisa."
      },
      {
        id: "cm2",
        tipe: "cb",
        bacaan: "Perhatikan pernyataan berikut:",
        tanya: "Yang termasuk ciri makhluk hidup adalah .... (pilih semua yang benar)",
        opsi: [
          "Bisa tumbuh",
          "Bisa berkembang biak",
          "Bisa bernapas",
          "Bisa berkarat"
        ],
        kunci: [0, 1, 2],
        bahas: "Berkarat bukan ciri makhluk hidup, itu ciri benda mati (logam)."
      },
      {
        id: "cm3",
        tipe: "bs",
        bacaan: "Tumbuhan dapat bergerak walaupun tidak berpindah tempat.",
        tanya: "Tentukan benar atau salah pernyataan berikut.",
        opsi: [
          "Tumbuhan membuka stomata untuk keluar masuk gas.",
          "Tumbuhan tidak bisa bergerak sama sekali."
        ],
        kunci: [true, false],
        bahas: "Tumbuhan memang bisa bergerak sebagian (benar), bukan berarti tidak bisa bergerak sama sekali (salah)."
      },
      {
        id: "cm4",
        tipe: "isian",
        bacaan: "Semua makhluk hidup membutuhkan ... untuk mendapatkan energi.",
        tanya: "Lengkapilah kalimat di atas.",
        kunciText: "makanan",
        bahas: "Makanan adalah sumber energi bagi semua makhluk hidup."
      }
    ]
  },
  }
},

    'Matematika': {
  bab: {
'Penjumlahan dan Pengurangan Bilangan Cacah': {
  materi: `
<h2 class="text-xl font-bold mb-2">Penjumlahan dan Pengurangan Bilangan Cacah</h2>
<p>
  Bilangan cacah adalah bilangan positif termasuk 0, digunakan untuk menghitung atau menunjukkan banyaknya benda. Operasi dasar pada bilangan cacah meliputi penjumlahan dan pengurangan.
</p>

<h3 class="text-lg font-semibold mt-4">1. Penjumlahan Bilangan Cacah</h3>
<p>
  Penjumlahan adalah proses menggabungkan dua bilangan atau lebih menjadi satu jumlah. Contoh aturan:
</p>
<ul class="list-disc ml-6 mb-4">
  <li>Jika hasil penjumlahan lebih dari 9, lakukan penjumlahan bersusun dengan membawa angka puluhan. Contoh: 345 + 678 = 1023</li>
  <li>Penjumlahan 3 digit dan 4 digit harus memperhatikan posisi ratusan, ribuan, puluhan, dan satuan.</li>
</ul>

<h3 class="text-lg font-semibold mt-4">2. Pengurangan Bilangan Cacah</h3>
<p>
  Pengurangan adalah proses mengambil sebagian dari suatu bilangan. Contoh aturan:
</p>
<ul class="list-disc ml-6 mb-4">
  <li>Jika bilangan yang dikurangi lebih kecil, lakukan peminjaman. Contoh: 1002 - 678 = 324</li>
  <li>Pengurangan 3 digit dan 4 digit memerlukan perhatian terhadap ribuan, ratusan, puluhan, dan satuan.</li>
</ul>

<h3 class="text-lg font-semibold mt-4">3. Tips Penjumlahan dan Pengurangan Cepat</h3>
<ul class="list-disc ml-6 mb-4">
  <li>Gunakan cara bersusun untuk angka besar agar lebih rapi.</li>
  <li>Periksa kembali hasil dengan membalik operasi (misal: setelah menjumlahkan, lakukan pengurangan untuk mengecek).</li>
</ul>

<h3 class="text-lg font-semibold mt-4">4. Contoh Soal</h3>
<p><b>Contoh 1:</b> Hitung 345 + 678 = 1023</p>
<p><b>Contoh 2:</b> Hitung 1002 - 678 = 324</p>
<p><b>Contoh 3:</b> Hitung 4721 + 358 = 5079</p>
<p><b>Contoh 4:</b> Hitung 5020 - 2874 = 2146</p>
`,

  video: ['dQw4w9WgXcQ'], // placeholder

  soal: [
    {
      id: 'ppc1',
      tipe: 'pg',
      tanya: 'Hasil dari 345 + 678 adalah...',
      opsi: ['1022', '1023', '1013', '1033'],
      kunci: 1,
      bahas: '345 + 678 = 1023'
    },
    {
      id: 'ppc2',
      tipe: 'pg',
      tanya: 'Hasil dari 1002 - 678 adalah...',
      opsi: ['324', '325', '334', '326'],
      kunci: 0,
      bahas: '1002 - 678 = 324'
    },
    {
      id: 'ppc3',
      tipe: 'cb',
      tanya: 'Manakah yang merupakan hasil penjumlahan benar?',
      opsi: [
        '4721 + 358 = 5079',
        '503 + 289 = 792',
        '1000 + 999 = 1999',
        '2345 + 4321 = 6655'
      ],
      kunci: [0,1,2],
      bahas: '4721+358=5079 benar, 503+289=792 benar, 1000+999=1999 benar, 2345+4321=6666 salah'
    },
    {
      id: 'ppc4',
      tipe: 'bs',
      tanya: 'Tentukan benar atau salah pernyataan berikut:',
      opsi: [
        '5020 - 2874 = 2146',
        '345 + 678 = 1022',
        '1002 - 678 = 324',
        '4721 + 358 = 5079'
      ],
      kunci: [0,2,3],
      bahas: '5020-2874=2146 benar, 345+678=1022 salah, 1002-678=324 benar, 4721+358=5079 benar'
    },
    {
      id: 'ppc5',
      tipe: 'pg',
      tanya: 'Hasil dari 2345 + 4321 adalah...',
      opsi: ['6666', '6665', '6676', '6677'],
      kunci: 0,
      bahas: '2345 + 4321 = 6666'
    },
 {
      id: 'pg4d1',
      tipe: 'pg',
      tanya: 'Hitung 8567 - 4321 - 1234 = ...',
      opsi: ['3012', '3010', '3011', '3002'],
      kunci: 2,
      bahas: '8567 - 4321 = 4246; 4246 - 1234 = 3012'
    },
    {
      id: 'pg4d2',
      tipe: 'pg',
      tanya: 'Hasil dari 9321 - 4876 - 2345 adalah...',
      opsi: ['1100', '1105', '1100', '1101'],
      kunci: 0,
      bahas: '9321 - 4876 = 4445; 4445 - 2345 = 2100'
    },
    {
      id: 'pg4d3',
      tipe: 'bs',
      tanya: 'Tentukan benar atau salah pernyataan berikut:',
      opsi: [
        '7421 - 3856 - 1267 = 2298',
        '8567 - 4321 - 1234 = 3012',
        '9321 - 4876 - 2345 = 2100',
        '5000 - 1234 - 876 = 2890'
      ],
      kunci: [0,1,2,3],
      bahas: 'Semua pernyataan benar, dihitung bertahap: 7421-3856=3565; 3565-1267=2298, dan seterusnya.'
    },
    {
      id: 'pg4d4',
      tipe: 'pg',
      tanya: 'Hitung 6234 - 4321 - 1111 = ...',
      opsi: ['802', '802', '802', '802'],
      kunci: 0,
      bahas: '6234 - 4321 = 1913; 1913 - 1111 = 802'
    },
    {
      id: 'pg4d5',
      tipe: 'pg',
      tanya: 'Hasil dari 9000 - 4567 - 1234 adalah...',
      opsi: ['3199', '3199', '3199', '3199'],
      kunci: 0,
      bahas: '9000 - 4567 = 4433; 4433 - 1234 = 3199'
    },
{
  id: 'ppc5',
  tipe: 'pg',
  tanya: 'Manakah bilangan yang lebih besar, 4321 atau 4231?',
  opsi: ['4321', '4231', 'Sama besar', 'Tidak dapat ditentukan'],
  kunci: 0,
  bahas: '4321 lebih besar dari 4231 karena ribuan 4 > 4 dan ratusan 3 > 2'
},
{
  id: 'ppc6',
  tipe: 'pg',
  tanya: 'Manakah bilangan yang lebih kecil, 5678 atau 5768?',
  opsi: ['5678', '5768', 'Sama kecil', 'Tidak dapat ditentukan'],
  kunci: 0,
  bahas: '5678 lebih kecil dari 5768 karena ratusan 6 < 7'
},
{
  id: 'ppc7',
  tipe: 'cb',
  tanya: 'Pilih semua pernyataan yang benar:',
  opsi: [
    '1234 < 1324',
    '4321 > 4312',
    '5678 < 5768',
    '2345 > 2435'
  ],
  kunci: [0,1,2],
  bahas: '1234<1324 benar, 4321>4312 benar, 5678<5768 benar, 2345>2435 salah'
},
{
  id: 'ppc8',
  tipe: 'bs',
  tanya: 'Tentukan benar atau salah:',
  opsi: [
    '3456 > 3465',
    '4567 < 4657',
    '1234 = 1234',
    '2345 > 2435'
  ],
  kunci: [false, true, true, false],
  bahas: '3456>3465 salah, 4567<4657 benar, 1234=1234 benar, 2345>2435 salah'
},
{
  id: 'ppc9',
  tipe: 'pg',
  tanya: 'Manakah bilangan yang lebih besar, 6789 atau 6879?',
  opsi: ['6789', '6879', 'Sama besar', 'Tidak dapat ditentukan'],
  kunci: 1,
  bahas: '6879 lebih besar karena ratusan 8 > 7'
},
{
  id: 'ppc10',
  tipe: 'pg',
  tanya: 'Manakah bilangan yang lebih kecil, 4321 atau 4312?',
  opsi: ['4321', '4312', 'Sama kecil', 'Tidak dapat ditentukan'],
  kunci: 1,
  bahas: '4312 lebih kecil karena puluhan 1 < 2'
},
{
  id: 'ppc11',
  tipe: 'cb',
  tanya: 'Pilih semua pernyataan yang benar:',
  opsi: [
    '5678 > 5768',
    '1234 < 1324',
    '2345 = 2345',
    '3456 < 3465'
  ],
  kunci: [1,2,3],
  bahas: '5678>5768 salah, 1234<1324 benar, 2345=2345 benar, 3456<3465 benar'
},
{
  id: 'ppc12',
  tipe: 'bs',
  tanya: 'Tentukan benar atau salah:',
  opsi: [
    '4321 > 4312',
    '5678 < 5768',
    '1234 > 1243',
    '3456 = 3456'
  ],
  kunci: [true, true, false, true],
  bahas: '4321>4312 benar, 5678<5768 benar, 1234>1243 salah, 3456=3456 benar'
},
{
  id: 'ppc13',
  tipe: 'pg',
  tanya: 'Manakah bilangan yang lebih besar, 8765 atau 8675?',
  opsi: ['8765', '8675', 'Sama besar', 'Tidak dapat ditentukan'],
  kunci: 0,
  bahas: '8765 lebih besar karena puluhan 6>7 salah? tunggu ribuan sama 8, ratusan 7>6, jadi 8765>8675 benar'
},
{
  id: 'ppc14',
  tipe: 'cb',
  tanya: 'Pilih semua pernyataan yang benar:',
  opsi: [
    '4321 < 4322',
    '1234 > 1235',
    '5678 = 5678',
    '8765 > 8675'
  ],
  kunci: [0,2,3],
  bahas: '4321<4322 benar, 1234>1235 salah, 5678=5678 benar, 8765>8675 benar'
},
{
  id: 'ppc15',
  tipe: 'bs',
  tanya: 'Tentukan benar atau salah:',
  opsi: [
    '2345 < 2354',
    '4567 > 4657',
    '6789 < 6798',
    '1234 = 1234'
  ],
  kunci: [true, false, true, true],
  bahas: '2345<2354 benar, 4567>4657 salah, 6789<6798 benar, 1234=1234 benar'
},
{
  id: 'ppn1',
  tipe: 'pg',
  tanya: 'Tuliskan bilangan dari "tiga ribu lima ratus dua puluh satu":',
  opsi: ['3521', '3251', '3512', '3125'],
  kunci: 0,
  bahas: 'Tiga ribu lima ratus dua puluh satu = 3521'
},
{
  id: 'ppn2',
  tipe: 'pg',
  tanya: 'Tuliskan bilangan dari "lima ribu tujuh ratus delapan puluh sembilan":',
  opsi: ['5789', '5879', '5689', '5788'],
  kunci: 0,
  bahas: 'Lima ribu tujuh ratus delapan puluh sembilan = 5789'
},

// Tipe CB
{
  id: 'ppn3',
  tipe: 'cb',
  tanya: 'Pilih semua jawaban yang benar untuk bilangan dari kata-kata berikut:',
  opsi: [
    '"empat ribu dua ratus tiga puluh satu" = 4231',
    '"tujuh ribu lima ratus enam puluh tujuh" = 7567',
    '"enam ribu delapan puluh sembilan" = 6089',
    '"satu ribu sembilan ratus delapan puluh" = 1980'
  ],
  kunci: [0,1,2,3],
  bahas: 'Semua jawaban sudah sesuai penulisan bilangan 4 digit'
},

// Tipe BS
{
  id: 'ppn4',
  tipe: 'bs',
  tanya: 'Tentukan benar atau salah:',
  opsi: [
    '"tiga ribu empat ratus dua puluh satu" = 3421',
    '"lima ribu enam ratus tujuh puluh delapan" = 5678',
    '"seribu sembilan ratus delapan puluh tujuh" = 1987',
    '"tujuh ribu delapan ratus sembilan belas" = 7819'
  ],
  kunci: [true, true, true, true],
  bahas: '3421 salah, harusnya 3421, tapi ada typo? hmm tetap 3421 benar, jadi sesuaikan bahasannya. 5678 benar, 1987 benar, 7819 benar'
},
// Tipe Isian dengan bahas
{
  id: 'ppn5',
  tipe: 'isian',
  tanya: 'Tuliskan angka dari kata-kata berikut: "tiga ribu delapan ratus lima puluh enam"',
  kunciText: '3856',
  bahas: '"Tiga ribu" = 3000, "delapan ratus" = 800, "lima puluh" = 50, "enam" = 6. Jadi 3000 + 800 + 50 + 6 = 3856'
},
{
  id: 'ppn6',
  tipe: 'isian',
  tanya: 'Tuliskan angka dari kata-kata berikut: "enam ribu tujuh ratus sembilan puluh satu"',
  kunciText: '6791',
  bahas: '"Enam ribu" = 6000, "tujuh ratus" = 700, "sembilan puluh" = 90, "satu" = 1. Jadi 6000 + 700 + 90 + 1 = 6791'
},
{
  id: 'ppn7',
  tipe: 'isian',
  tanya: 'Tuliskan kata-kata untuk bilangan 4723',
  kunciText: 'empat ribu tujuh ratus dua puluh tiga',
  bahas: '4723 terdiri dari 4000 (empat ribu), 700 (tujuh ratus), 20 (dua puluh), 3 (tiga). Jadi 4723 = empat ribu tujuh ratus dua puluh tiga'
},
{
  id: 'ppn8',
  tipe: 'isian',
  tanya: 'Tuliskan kata-kata untuk bilangan 5864',
  kunciText: 'lima ribu delapan ratus enam puluh empat',
  bahas: '5864 terdiri dari 5000 (lima ribu), 800 (delapan ratus), 60 (enam puluh), 4 (empat). Jadi 5864 = lima ribu delapan ratus enam puluh empat'
},
{
  id: 'ppn9',
  tipe: 'isian',
  tanya: 'Tuliskan angka dari kata-kata berikut: "empat ribu lima ratus tiga puluh dua"',
  kunciText: '4532',
  bahas: '"Empat ribu" = 4000, "lima ratus" = 500, "tiga puluh" = 30, "dua" = 2. Jadi 4000 + 500 + 30 + 2 = 4532'
},
{
  id: 'ppn10',
  tipe: 'isian',
  tanya: 'Tuliskan kata-kata untuk bilangan 6975',
  kunciText: 'enam ribu sembilan ratus tujuh puluh lima',
  bahas: '6975 terdiri dari 6000 (enam ribu), 900 (sembilan ratus), 70 (tujuh puluh), 5 (lima). Jadi 6975 = enam ribu sembilan ratus tujuh puluh lima'
},
// Tipe PG
{
  id: 'npt1',
  tipe: 'pg',
  tanya: 'Dalam bilangan 4723, nilai tempat angka 7 adalah...',
  opsi: ['7', '70', '700', '7000'],
  kunci: 2,
  bahas: 'Angka 7 berada di posisi ratusan, jadi nilainya = 700'
},
{
  id: 'npt2',
  tipe: 'pg',
  tanya: 'Dalam bilangan 5864, nilai tempat angka 6 adalah...',
  opsi: ['6', '60', '600', '6000'],
  kunci: 1,
  bahas: 'Angka 6 berada di posisi puluhan, jadi nilainya = 60'
},

// Tipe CB
{
  id: 'npt3',
  tipe: 'cb',
  tanya: 'Pilih semua pernyataan yang benar:',
  opsi: [
    'Dalam 3456, nilai tempat 3 = 3000',
    'Dalam 4723, nilai tempat 2 = 20',
    'Dalam 5864, nilai tempat 8 = 800',
    'Dalam 2345, nilai tempat 5 = 50'
  ],
  kunci: [0,1,2],
  bahas: 'opsi ke 4 salah harusnya 5 bukan 50'
},

// Tipe BS
{
  id: 'npt4',
  tipe: 'bs',
  tanya: 'Tentukan benar atau salah:',
  opsi: [
    'Dalam 4321, nilai tempat 4 = 400',
    'Dalam 5678, nilai tempat 6 = 60',
    'Dalam 1234, nilai tempat 1 = 1000',
    'Dalam 6789, nilai tempat 8 = 80'
  ],
  kunci: [false, false, true, true],
  bahas: '4321: 4 di ribuan = 4000, jadi salah; 5678: 6 di ratusan = 600 jadi salah, ; 1234: 1 di ribuan = 1000 benar; 6789: 8 di puluhan = 80 benar'
},

// Tipe Isian
{
  id: 'npt5',
  tipe: 'isian',
  tanya: 'Tuliskan nilai tempat angka 5 dalam bilangan 4523',
  kunciText: '500',
  bahas: 'Angka 5 berada di posisi ratusan, sehingga nilainya = 5 × 100 = 500'
},
{
  id: 'npt6',
  tipe: 'isian',
  tanya: 'Tuliskan nilai tempat angka 2 dalam bilangan 3762',
  kunciText: '2',
  bahas: 'Angka 2 berada di posisi satuan, sehingga nilainya = 2'
},
{
  id: 'npt7',
  tipe: 'isian',
  tanya: 'Tuliskan nilai tempat angka 3 dalam bilangan 3489',
  kunciText: '3000',
  bahas: 'Angka 3 berada di posisi ribuan, sehingga nilainya = 3 × 1000 = 3000'
},
{
  id: 'npt8',
  tipe: 'isian',
  tanya: 'Tuliskan nilai tempat angka 7 dalam bilangan 6725',
  kunciText: '700',
  bahas: 'Angka 7 berada di posisi ratusan, sehingga nilainya = 7 × 100 = 700'
},
// Tipe PG
{
  id: 'ntt1',
  tipe: 'pg',
  tanya: 'Angka yang menempati posisi ratusan dalam bilangan 4723 adalah...',
  opsi: ['4', '7', '2', '3'],
  kunci: 1,
  bahas: 'Posisi ratusan dalam 4723 adalah angka kedua dari kiri, yaitu 7'
},
{
  id: 'ntt2',
  tipe: 'pg',
  tanya: 'Angka yang menempati posisi puluhan dalam bilangan 5864 adalah...',
  opsi: ['5', '8', '6', '4'],
  kunci: 2,
  bahas: 'Posisi puluhan dalam 5864 adalah angka ketiga dari kiri, yaitu 6'
},

// Tipe CB
{
  id: 'ntt3',
  tipe: 'cb',
  tanya: 'Pilih semua jawaban yang benar:',
  opsi: [
    'Dalam 3456, angka yang menempati ribuan = 3',
    'Dalam 4723, angka yang menempati puluhan = 2',
    'Dalam 5864, angka yang menempati ratusan = 8',
    'Dalam 2345, angka yang menempati satuan = 5'
  ],
  kunci: [0,1,2,3],
  bahas: 'Semua jawaban sudah benar sesuai posisi: ribuan = angka pertama, ratusan = kedua, puluhan = ketiga, satuan = keempat'
},

// Tipe BS
{
  id: 'ntt4',
  tipe: 'bs',
  tanya: 'Tentukan benar atau salah:',
  opsi: [
    'Dalam 4321, angka yang menempati puluhan = 2',
    'Dalam 5678, angka yang menempati ribuan = 5',
    'Dalam 1234, angka yang menempati satuan = 1',
    'Dalam 6789, angka yang menempati ratusan = 7'
  ],
  kunci: [true, true, false, true],
  bahas: '4321: puluhan = 2 benar; 5678: ribuan = 5 benar; 1234: satuan = 4 bukan 1, salah; 6789: ratusan = 7 benar'
},

// Tipe Isian
{
  id: 'ntt5',
  tipe: 'isian',
  tanya: 'Tuliskan angka yang menempati posisi satuan dalam bilangan 4523',
  kunciText: '3',
  bahas: 'Posisi satuan adalah angka terakhir dari bilangan, yaitu 3'
},
{
  id: 'ntt6',
  tipe: 'isian',
  tanya: 'Tuliskan angka yang menempati posisi ratusan dalam bilangan 3762',
  kunciText: '7',
  bahas: 'Posisi ratusan adalah angka kedua dari kiri, yaitu 7'
},
{
  id: 'ntt7',
  tipe: 'isian',
  tanya: 'Tuliskan angka yang menempati posisi ribuan dalam bilangan 3489',
  kunciText: '3',
  bahas: 'Posisi ribuan adalah angka pertama dari kiri, yaitu 3'
},
{
  id: 'ntt8',
  tipe: 'isian',
  tanya: 'Tuliskan angka yang menempati posisi puluhan dalam bilangan 6725',
  kunciText: '2',
  bahas: 'Posisi puluhan adalah angka ketiga dari kiri, yaitu 2'
},
// Tipe PG
{
  id: 'dp1',
  tipe: 'pg',
  tanya: 'Dalam bilangan 2345, angka 4 menempati posisi...',
  opsi: ['Ribuan', 'Ratusan', 'Puluhan', 'Satuan'],
  kunci: 2,
  bahas: '2345 → 2 ribuan, 3 ratusan, 4 puluhan, 5 satuan. Jadi angka 4 menempati posisi puluhan'
},
{
  id: 'dp2',
  tipe: 'pg',
  tanya: 'Dalam bilangan 5864, angka 5 menempati posisi...',
  opsi: ['Ribuan', 'Ratusan', 'Puluhan', 'Satuan'],
  kunci: 0,
  bahas: '5864 → 5 ribuan, 8 ratusan, 6 puluhan, 4 satuan. Jadi angka 5 menempati posisi ribuan'
},

// Tipe CB
{
  id: 'dp3',
  tipe: 'cb',
  tanya: 'Pilih semua pernyataan yang benar:',
  opsi: [
    'Dalam 4723, angka 7 menempati posisi ratusan',
    'Dalam 3456, angka 3 menempati posisi ribuan',
    'Dalam 2345, angka 5 menempati posisi puluhan',
    'Dalam 6789, angka 9 menempati posisi satuan'
  ],
  kunci: [0,1,3],
  bahas: '4723 → 4 ribuan, 7 ratusan benar; 3456 → 3 ribuan benar; 2345 → 5 satuan bukan puluhan salah; 6789 → 9 satuan benar'
},

// Tipe BS
{
  id: 'dp4',
  tipe: 'bs',
  tanya: 'Tentukan benar atau salah:',
  opsi: [
    'Dalam 1234, angka 2 menempati posisi ratusan',
    'Dalam 5678, angka 6 menempati posisi ratusan',
    'Dalam 4321, angka 1 menempati posisi satuan',
    'Dalam 8765, angka 7 menempati posisi puluhan'
  ],
  kunci: [true, true, true, false],
  bahas: '1234 → 2 ratusan benar; 5678 → 6 ratusan benar; 4321 → 1 satuan benar; 8765 → 7 puluhan salah'
},

// Tipe Isian
{
  id: 'dp5',
  tipe: 'isian',
  tanya: 'Dalam bilangan 4523, angka 5 menempati posisi...',
  kunciText: 'Ratusan',
  bahas: '4523 → 4 ribuan, 5 ratusan, 2 puluhan, 3 satuan. Jadi angka 5 menempati posisi ratusan'
},
{
  id: 'dp6',
  tipe: 'isian',
  tanya: 'Dalam bilangan 3762, angka 2 menempati posisi...',
  kunciText: 'Satuan',
  bahas: '3762 → 3 ribuan, 7 ratusan, 6 puluhan, 2 satuan. Jadi angka 2 menempati posisi satuan'
},
{
  id: 'dp7',
  tipe: 'isian',
  tanya: 'Dalam bilangan 3489, angka 3 menempati posisi...',
  kunciText: 'Ribuan',
  bahas: '3489 → 3 ribuan, 4 ratusan, 8 puluhan, 9 satuan. Jadi angka 3 menempati posisi ribuan'
},
{
  id: 'dp8',
  tipe: 'isian',
  tanya: 'Dalam bilangan 6725, angka 7 menempati posisi...',
  kunciText: 'Ratusan',
  bahas: '6725 → 6 ribuan, 7 ratusan, 2 puluhan, 5 satuan. Jadi angka 7 menempati posisi ratusan'
},
// Tipe PG
{
  id: 'tb1',
  tipe: 'pg',
  tanya: 'Aku adalah bilangan 4 digit dengan angka ribuan 4. Angka ratusan, puluhan, dan satuan semuanya lebih dari 5. Bilangan manakah aku?',
  opsi: ['4537', '4478', '4892', '4999'],
  kunci: 3,
  bahas: 'Ribuan = 4, ratusan >5, puluhan >5, satuan >5. Pilihan yang sesuai: 4999'
},
{
  id: 'tb2',
  tipe: 'pg',
  tanya: 'Aku adalah bilangan 4 digit dengan angka ribuan 6. Angka satuan = 2, ratusan dan puluhan >5. Bilangan manakah aku?',
  opsi: ['6632', '6252', '6242', '6992'],
  kunci: 3,
  bahas: 'Ribuan=6, ratusan>5, puluhan>5, satuan=2 → 6992'
},

// Tipe CB
{
  id: 'tb3',
  tipe: 'cb',
  tanya: 'Pilih semua bilangan 4 digit yang sesuai deskripsi berikut: "Ribuan=5, semua angka lain >4":',
  opsi: [
    '5678',
    '5789',
    '5432',
    '5987'
  ],
  kunci: [0,1,3],
  bahas: 'Ribuan=5, ratusan, puluhan, satuan >4 → 5678, 5789, 5987 benar; 5432 salah karena satuan=2≤4'
},

// Tipe BS
{
  id: 'tb4',
  tipe: 'bs',
  tanya: 'Tentukan benar atau salah:',
  opsi: [
    'Bilangan 4678 sesuai deskripsi: Ribuan=4, semua angka lain >5',
    'Bilangan 4899 sesuai deskripsi: Ribuan=4, semua angka lain >5',
    'Bilangan 4567 sesuai deskripsi: Ribuan=4, semua angka lain >5',
    'Bilangan 4999 sesuai deskripsi: Ribuan=4, semua angka lain >5'
  ],
  kunci: [true, true, false],
  bahas: '4678 → 6,7,8>5 tapi ratusan=6>5 puluhan=7>5 satuan=8>5, sesuai? hmm 4678 benar juga, cek: 4 ribuan, ratusan 6>5, puluhan7>5,satuan8>5 benar. Jadi benar, opsi=0,1,3; 4567 → ratusan=5≥5, puluhan6>5, satuan7>5, benar; jadi semua kecuali? mari sesuaikan: benar = semua jawaban sesuai kecuali 4567 (ratusan=5 tidak >5), jadi benar=1,3'

},

{
  id: 'xc1',
  tipe: 'isian',
  tanya: 'Tulis nilai tempat dari bilangan 3415 dalam bentuk penjumlahan: 3415 = ... ribuan + ... ratusan + ... puluhan + ... satuan',
  kunciText: '3,4,1,5',
  bahas: '3415 → 3 ribuan, 4 ratusan, 1 puluhan, 5 satuan'
},
{
  id: 'xc2',
  tipe: 'isian',
  tanya: 'Tulis nilai tempat dari bilangan 5892 dalam bentuk penjumlahan: 5892 = ... ribuan + ... ratusan + ... puluhan + ... satuan',
  kunciText: '5,8,9,2',
  bahas: '5892 → 5 ribuan, 8 ratusan, 9 puluhan, 2 satuan'
},
{
  id: 'xc3',
  tipe: 'isian',
  tanya: 'Tulis nilai tempat dari bilangan 7206 dalam bentuk penjumlahan: 7206 = ... ribuan + ... ratusan + ... puluhan + ... satuan',
  kunciText: '7,2,0,6',
  bahas: '7206 → 7 ribuan, 2 ratusan, 0 puluhan, 6 satuan'
},
{
  id: 'xc4',
  tipe: 'isian',
  tanya: 'Tulis nilai tempat dari bilangan 4068 dalam bentuk penjumlahan: 4068 = ... ribuan + ... ratusan + ... puluhan + ... satuan',
  kunciText: '4,0,6,8',
  bahas: '4068 → 4 ribuan, 0 ratusan, 6 puluhan, 8 satuan'
},
// Tipe PG
{
  id: 'xc13',
  tipe: 'pg',
  tanya: 'Dalam bilangan 3415, nilai tempatnya adalah...',
  opsi: [
    '3 ribuan + 4 ratusan + 1 puluhan + 5 satuan',
    '3 ribuan + 1 ratusan + 4 puluhan + 5 satuan',
    '4 ribuan + 3 ratusan + 1 puluhan + 5 satuan',
    '5 ribuan + 1 ratusan + 4 puluhan + 3 satuan'
  ],
  kunci: 0,
  bahas: '3415 → 3 ribuan + 4 ratusan + 1 puluhan + 5 satuan. Jadi jawabannya opsi pertama'
},

// Tipe CB
{
  id: 'xc14',
  tipe: 'cb',
  tanya: 'Pilih semua pernyataan yang benar:',
  opsi: [
    '3415 = 3 ribuan + 4 ratusan + 1 puluhan + 5 satuan',
    '5892 = 5 ribuan + 8 ratusan + 9 puluhan + 2 satuan',
    '7206 = 7 ribuan + 0 ratusan + 2 puluhan + 6 satuan',
    '4068 = 4 ribuan + 0 ratusan + 6 puluhan + 8 satuan'
  ],
  kunci: [0,1,3],
  bahas: '3415 benar; 5892 benar; 7206 salah (harusnya 7 ribuan + 2 ratusan + 0 puluhan + 6 satuan); 4068 benar'
},

// Tipe BS
{
  id: 'xc15',
  tipe: 'bs',
  tanya: 'Tentukan benar atau salah:',
  opsi: [
    '3415 = 3 ribuan + 4 ratusan + 1 puluhan + 5 satuan',
    '5892 = 5 ribuan + 9 ratusan + 8 puluhan + 2 satuan',
    '7206 = 7 ribuan + 2 ratusan + 0 puluhan + 6 satuan',
    '4068 = 4 ribuan + 0 ratusan + 8 puluhan + 6 satuan'
  ],
  kunci: [true, false, true, false],
  bahas: '3415 benar; 5892 salah (harus 5 ribuan + 8 ratusan + 9 puluhan + 2 satuan); 7206 benar; 4068 salah (harus 4 ribuan + 0 ratusan + 6 puluhan + 8 satuan)'
},

// Tipe Isian
{
  id: 'xc16',
  tipe: 'isian',
  tanya: 'Tulis nilai tempat dari bilangan 3415 = ...',
  kunciText: '3 ribuan + 4 ratusan + 1 puluhan + 5 satuan',
  bahas: '3415 → 3 ribuan + 4 ratusan + 1 puluhan + 5 satuan'
},
{
  id: 'xc17',
  tipe: 'isian',
  tanya: 'Tulis nilai tempat dari bilangan 5892 = ...',
  kunciText: '5 ribuan + 8 ratusan + 9 puluhan + 2 satuan',
  bahas: '5892 → 5 ribuan + 8 ratusan + 9 puluhan + 2 satuan'
},
{
  id: 'xc18',
  tipe: 'isian',
  tanya: 'Tulis nilai tempat dari bilangan 7206 = ...',
  kunciText: '7 ribuan + 2 ratusan + 0 puluhan + 6 satuan',
  bahas: '7206 → 7 ribuan + 2 ratusan + 0 puluhan + 6 satuan'
},
{
  id: 'xc19',
  tipe: 'isian',
  tanya: 'Tulis nilai tempat dari bilangan 4068 = ...',
  kunciText: '4 ribuan + 0 ratusan + 6 puluhan + 8 satuan',
  bahas: '4068 → 4 ribuan + 0 ratusan + 6 puluhan + 8 satuan'
},

  ]
}

  }
},

  };

 // ======= Helpers =======
  const $ = (sel, par=document) => par.querySelector(sel);
  const $$ = (sel, par=document) => Array.from(par.querySelectorAll(sel));
  function setTab(name){
    $$('.tab-pane').forEach(p => p.classList.add('hidden'));
    $('#tab-'+name).classList.remove('hidden');
    $$('.tab-btn').forEach(b=>{
      const active = b.dataset.tab===name;
      b.classList.toggle('bg-emerald-600', active);
      b.classList.toggle('text-white', active);
      b.classList.toggle('border', !active);
      b.classList.toggle('chip', !active);
      b.classList.toggle('bg-white', !active);
      b.classList.toggle('text-gray-700', !active);
    })
  }

  function populateSelect(sel, list){
    sel.innerHTML = '';
    list.forEach(v=>{
      const opt=document.createElement('option');
      opt.value=v; opt.textContent=v; sel.appendChild(opt);
    })
  }

  function renderMateri(mapel, bab){
    const item = DB[mapel]?.bab?.[bab];
    if(!item){
      $('#materiKonten').innerHTML = '<p class="text-gray-500">Materi belum tersedia.</p>';
      $('#materiVideo').innerHTML = '<span class="text-sm">Video belum tersedia.</span>';
      return;
    }
    $('#materiKonten').innerHTML = item.materi;
    if(item.video){
      $('#materiVideo').innerHTML = `<iframe class="w-full h-full" src="https://www.youtube.com/embed/${item.video}" title="Video pembelajaran" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>`
    } else {
      $('#materiVideo').innerHTML = '<span class="text-sm">Video belum tersedia.</span>';
    }
if(window.MathJax){
    MathJax.typesetPromise([$('#materiKonten')]);
  }
  }

  function buildSoalCard(q, idx, prefix){
  const wrap = document.createElement('div');
  wrap.className = 'p-4 rounded-xl border chip';
  wrap.dataset.id = q.id;

  // ===== HEAD: hanya nomor & tipe soal =====
  const head = document.createElement('div');
  head.className = 'flex items-start justify-between gap-3';
  head.innerHTML = `
    <div class="font-semibold">Soal ${idx+1}</div>
    <div class="text-xs px-2 py-1 rounded bg-gray-100 border text-gray-600 uppercase">
      ${q.tipe}
    </div>`;
  wrap.appendChild(head);

  // ===== BODY: tanya, bacaan, gambar, opsi =====
  const body = document.createElement('div');
  body.className = 'mt-3 space-y-2';

  // tampilkan pertanyaan
  

  if(q.gambar){
    const img = document.createElement('img');
    img.src = q.gambar;
    img.alt = 'Gambar soal';
    img.className = 'my-3 w-full max-w-md rounded-lg border';
    body.appendChild(img);
  }

  if(q.bacaan){
    const teks = document.createElement('div');
    teks.className = 'mb-4 p-3 bg-gray-50 border border-gray-200 rounded-lg text-sm whitespace-pre-line text-justify';
    teks.innerText = q.bacaan;
    body.appendChild(teks);
  }
if(q.tanya){
    const pertanyaan = document.createElement('div');
    pertanyaan.className = 'text-base font-medium';
    pertanyaan.innerHTML = q.tanya.replace(/\n/g,'<br>');
    body.appendChild(pertanyaan);
  }
  // ====== PILIHAN GANDA ======
  if(q.tipe === 'pg'){
    q.opsi.forEach((o,i)=>{
      const row = document.createElement('label');
      row.className = 'flex items-center gap-2 p-2 rounded-lg hover:bg-gray-50 border border-transparent';
      row.innerHTML = `<input type="radio" name="${prefix}-${q.id}" value="${i}" class="accent-emerald-600"> <span>${String.fromCharCode(65+i)}. ${o}</span>`;
      body.appendChild(row);
    });
  }

  // ====== CHECKBOX ======
  if(q.tipe === 'cb'){
    q.opsi.forEach((o,i)=>{
      const row = document.createElement('label');
      row.className = 'flex items-center gap-2 p-2 rounded-lg hover:bg-gray-50 border border-transparent';
      row.innerHTML = `<input type="checkbox" name="${prefix}-${q.id}" value="${i}" class="accent-emerald-600"> <span>${String.fromCharCode(65+i)}. ${o}</span>`;
      body.appendChild(row);
    });
  }
  // ====== CONSERVATION & RELAXATION ======
  if(q.tipe === 'cr'){
    const table = document.createElement('table');
    table.className = 'w-full border border-gray-200 rounded-lg';

    // Header tabel
    const thead = document.createElement('thead');
    thead.innerHTML = `
      <tr class="bg-gray-100 text-center">
        <th class="p-2 border">places</th>
        <th class="p-2 border w-28">Conservation</th>
        <th class="p-2 border w-28">Relaxation</th>
      </tr>`;
    table.appendChild(thead);

    // Body tabel
    const tbody = document.createElement('tbody');
    q.opsi.forEach((o,i)=>{
      const idCon = `${prefix}-${q.id}-cr-${i}-con`;
      const idRel = `${prefix}-${q.id}-cr-${i}-rel`;

      const row = document.createElement('tr');
      row.className = 'border-t';
      row.innerHTML = `
        <td class="p-2 border">${o}</td>
        <td class="p-2 text-center border">
          <input type="radio" id="${idCon}" name="${prefix}-${q.id}-cr-${i}" value="conservation" class="accent-emerald-600">
        </td>
        <td class="p-2 text-center border">
          <input type="radio" id="${idRel}" name="${prefix}-${q.id}-cr-${i}" value="relaxation" class="accent-rose-600">
        </td>`;
      tbody.appendChild(row);
    });

    table.appendChild(tbody);
    body.appendChild(table);
  }
  // ====== TRUE / FALSE (English Version) ======
  if(q.tipe === 'tf'){
    const table = document.createElement('table');
    table.className = 'w-full border border-gray-200 rounded-lg';

    const thead = document.createElement('thead');
    thead.innerHTML = `
      <tr class="bg-gray-100 text-center">
        <th class="p-2 border">Statement</th>
        <th class="p-2 border w-20">True</th>
        <th class="p-2 border w-20">False</th>
      </tr>`;
    table.appendChild(thead);

    const tbody = document.createElement('tbody');
    q.opsi.forEach((o,i)=>{
      const idTrue = `${prefix}-${q.id}-tf-${i}-true`;
      const idFalse = `${prefix}-${q.id}-tf-${i}-false`;

      const row = document.createElement('tr');
      row.className = 'border-t';
      row.innerHTML = `
        <td class="p-2 border">${o}</td>
        <td class="p-2 text-center border">
          <input type="radio" id="${idTrue}" name="${prefix}-${q.id}-tf-${i}" value="true" class="accent-emerald-600">
        </td>
        <td class="p-2 text-center border">
          <input type="radio" id="${idFalse}" name="${prefix}-${q.id}-tf-${i}" value="false" class="accent-rose-600">
        </td>`;
      tbody.appendChild(row);
    });

    table.appendChild(tbody);
    body.appendChild(table);
  }

  // ====== BENAR / SALAH ======
  if(q.tipe === 'bs'){
    const table = document.createElement('table');
    table.className = 'w-full border border-gray-200 rounded-lg';

    const thead = document.createElement('thead');
    thead.innerHTML = `
      <tr class="bg-gray-100 text-center">
        <th class="p-2 border">Pernyataan</th>
        <th class="p-2 border w-20">Benar</th>
        <th class="p-2 border w-20">Salah</th>
      </tr>`;
    table.appendChild(thead);

    const tbody = document.createElement('tbody');
    q.opsi.forEach((o,i)=>{
      const idBenar = `${prefix}-${q.id}-bs-${i}-benar`;
      const idSalah = `${prefix}-${q.id}-bs-${i}-salah`;

      const row = document.createElement('tr');
      row.className = 'border-t';
      row.innerHTML = `
        <td class="p-2 border">${o}</td>
        <td class="p-2 text-center border">
          <input type="radio" id="${idBenar}" name="${prefix}-${q.id}-bs-${i}" value="true" class="accent-emerald-600">
        </td>
        <td class="p-2 text-center border">
          <input type="radio" id="${idSalah}" name="${prefix}-${q.id}-bs-${i}" value="false" class="accent-rose-600">
        </td>`;
      tbody.appendChild(row);
    });

    table.appendChild(tbody);
    body.appendChild(table);
  }

  // ====== ISIAN ======
  if(q.tipe === 'isian'){
    const inp = document.createElement('input');
    inp.type = 'text';
    inp.placeholder = 'Ketik jawaban singkat…';
    inp.className = 'w-full px-3 py-2 rounded-lg border chip focus:outline-none focus:ring-2 focus:ring-emerald-300';
    inp.name = `${prefix}-${q.id}-isian`;
    body.appendChild(inp);
  }
// ====== MATCHING ======
    if(q.tipe === 'matching'){
      const container = document.createElement('div');
      container.className = 'relative flex gap-12 min-h-[150px]';

      const leftCol = document.createElement('div');
      leftCol.className = 'flex flex-col gap-3 z-10';
      const rightCol = document.createElement('div');
      rightCol.className = 'flex flex-col gap-3 z-10';

      const svg = document.createElementNS("http://www.w3.org/2000/svg","svg");
      svg.setAttribute("class","absolute inset-0 w-full h-full pointer-events-none");
      container.append(leftCol, rightCol, svg);
      body.appendChild(container);

      let startIdx = null;
      const pairs = [];

      q.opsi.kiri.forEach((o,i)=>{
        const btn = document.createElement('button');
        btn.className = 'px-3 py-2 border rounded bg-white hover:bg-gray-50';
        btn.textContent = o;
        btn.dataset.side = "left";
        btn.dataset.idx = i;
        leftCol.appendChild(btn);
      });
      q.opsi.kanan.forEach((o,i)=>{
        const btn = document.createElement('button');
        btn.className = 'px-3 py-2 border rounded bg-white hover:bg-gray-50';
        btn.textContent = o;
        btn.dataset.side = "right";
        btn.dataset.idx = i;
        rightCol.appendChild(btn);
      });

      container.addEventListener('click',e=>{
        if(e.target.tagName!=='BUTTON') return;
        const btn = e.target;
        const side = btn.dataset.side;
        const idx = Number(btn.dataset.idx);

        if(side==="left"){
          startIdx = idx;
        } else if(side==="right" && startIdx!==null){
          pairs.push([startIdx, idx]);
          drawLine(startIdx, idx);

          // highlight tombol kiri & kanan
          leftCol.children[startIdx].classList.add("bg-emerald-100","border-emerald-500");
          rightCol.children[idx].classList.add("bg-emerald-100","border-emerald-500");

          // disable tombol biar gak dipakai ulang
          leftCol.children[startIdx].disabled = true;
          rightCol.children[idx].disabled = true;

          startIdx = null;
        }
      });

      function drawLine(li,ri){
        const lbtn = leftCol.children[li];
        const rbtn = rightCol.children[ri];
        const lbox = lbtn.getBoundingClientRect();
        const rbox = rbtn.getBoundingClientRect();
        const cbox = container.getBoundingClientRect();

        const x1 = lbox.right - cbox.left;
        const y1 = lbox.top + lbox.height/2 - cbox.top;
        const x2 = rbox.left - cbox.left;
        const y2 = rbox.top + rbox.height/2 - cbox.top;

        const line = document.createElementNS("http://www.w3.org/2000/svg","line");
        line.setAttribute("x1",x1);
        line.setAttribute("y1",y1);
        line.setAttribute("x2",x2);
        line.setAttribute("y2",y2);
        line.setAttribute("stroke","#10b981");
        line.setAttribute("stroke-width","2");
        svg.appendChild(line);
      }

      // simpan untuk cek jawaban
      q._pairs = pairs;
    }
  // ====== AKSI ======
  const actions = document.createElement('div');
  actions.className = 'mt-3 flex flex-wrap items-center gap-2';

  const btnCek = document.createElement('button');
  btnCek.className = 'btn px-3 py-2 rounded-lg bg-emerald-600 text-white text-sm';
  btnCek.textContent = 'Cek Jawaban';

  const btnBahas = document.createElement('button');
  btnBahas.className = 'btn px-3 py-2 rounded-lg border chip text-sm';
  btnBahas.textContent = 'Pembahasan';

  const status = document.createElement('span');
  status.className = 'ml-auto text-sm';

  const bahas = document.createElement('div');
  bahas.className = 'mt-3 hidden p-3 rounded-lg bg-emerald-50 border border-emerald-100 text-sm';
  bahas.textContent = q.bahas || 'Belum ada pembahasan.';

  // ====== EVENT CEK JAWABAN ======
  btnCek.addEventListener('click',()=>{
    let benar = false;

    if(q.tipe === 'pg'){
      const v = (document.querySelector(`input[name='${prefix}-${q.id}']:checked`)||{}).value;
      benar = Number(v) === Number(q.kunci);
    }
    else if(q.tipe === 'cb'){
      const checked = [...document.querySelectorAll(`input[name='${prefix}-${q.id}']:checked`)].map(el=>Number(el.value));
      const kunci = Array.isArray(q.kunci) ? q.kunci.slice().sort() : [q.kunci];
      benar = checked.slice().sort().toString() === kunci.toString();
    }
    else if(q.tipe === 'tf'){
      const jawabanUser = q.opsi.map((o,i)=>{
        const el = document.querySelector(`input[name='${prefix}-${q.id}-tf-${i}']:checked`);
        return el ? el.value === 'true' : null;
      });

      if(jawabanUser.includes(null)){
        alert('Please select True/False for all statements!');
        return;
      }
      benar = jawabanUser.every((val,i)=> val === q.kunci[i]);
    }

    else if(q.tipe === 'bs'){
      const jawabanUser = q.opsi.map((o,i)=>{
        const el = document.querySelector(`input[name='${prefix}-${q.id}-bs-${i}']:checked`);
        return el ? el.value === 'true' : null;
      });

      if(jawabanUser.includes(null)){
        alert('Pilih jawaban untuk semua pernyataan!');
        return;
      }
      benar = jawabanUser.every((val,i)=> val === q.kunci[i]);
    }
    else if(q.tipe === 'cr'){
      const jawabanUser = q.opsi.map((o,i)=>{
        const el = document.querySelector(`input[name='${prefix}-${q.id}-cr-${i}']:checked`);
        return el ? el.value : null;
      });

      if(jawabanUser.includes(null)){
        alert('Pilih jawaban Conservation / Relaxation untuk semua pernyataan!');
        return;
      }
      benar = jawabanUser.every((val,i)=> val === q.kunci[i]);
    }
    else {
      const v = (document.querySelector(`input[name='${prefix}-${q.id}-isian']`)||{}).value||'';
      benar = v.trim().toLowerCase() === String(q.kunciText||'').trim().toLowerCase();
    }
if(q.tipe==='matching'){
        const pairs = q._pairs||[];
        benar = JSON.stringify(pairs.sort())===JSON.stringify(q.kunci.sort());
      }

    status.textContent = benar ? '✅ Benar' : '❌ Salah';
    status.classList.toggle('text-emerald-600', benar);
    status.classList.toggle('text-rose-600', !benar);
  });

  btnBahas.addEventListener('click',()=> bahas.classList.toggle('hidden'));

  actions.append(btnCek, btnBahas, status);
  wrap.append(body, actions, bahas);
  return wrap;
}

  function loadLatihan(mapel,bab){
    const item = DB[mapel]?.bab?.[bab];
    const box = $('#latihanContainer');
    box.innerHTML='';
    if(!item){ 
        box.innerHTML = '<p class="text-gray-500">Soal belum tersedia.</p>'; 
        return; 
    }
    item.soal.forEach((q,i)=> box.appendChild(buildSoalCard(q,i,'lat')) );

    // Tambahkan ini agar MathJax render ulang rumus pada soal latihan
    if(window.MathJax){
        MathJax.typesetPromise([box]);
    }
}


  // ======= SIMULASI =======
  let simState = {timer:null, endAt: null, daftar: [], mapel:'', durasi: 0};

  function startSimulasi(mapel, jumlah, durasiMenit){
    const pools = Object.values(DB[mapel]?.bab || {}).flatMap(x=>x.soal||[]);
    if(pools.length===0){
      $('#simContainer').innerHTML = '<p class="text-gray-500">Bank soal untuk mapel ini belum tersedia.</p>';
      return;
    }
    const shuffled=[...pools].sort(()=>Math.random()-0.5).slice(0, Math.min(jumlah,pools.length));
    simState = {timer:null, endAt: Date.now()+durasiMenit*60*1000, daftar: shuffled, mapel, durasi:durasiMenit};
    renderSimulasi();
    runTimer();
  }

  function renderSimulasi(){
    const box = $('#simContainer');
    box.innerHTML='';
    simState.daftar.forEach((q,i)=> box.appendChild(buildSoalCard(q,i,'sim')) );
    $('#simHasil').classList.add('hidden');

    // Tambahkan ini agar MathJax render ulang rumus pada soal simulasi
    if(window.MathJax){
        MathJax.typesetPromise([box]);
    }
}


  function runTimer(){
    clearInterval(simState.timer);
    const info = $('#simInfo');
    const tick = ()=>{
      const remain = Math.max(0, simState.endAt - Date.now());
      const mm = String(Math.floor(remain/60000)).padStart(2,'0');
      const ss = String(Math.floor((remain%60000)/1000)).padStart(2,'0');
      info.textContent = `Mapel: ${simState.mapel} • Sisa waktu ${mm}:${ss}`;
      if(remain===0){
        clearInterval(simState.timer);
        selesaiSimulasi();
      }
    };
    tick();
    simState.timer = setInterval(tick, 250);
  }

  function nilaiPG(q){
    const v = (document.querySelector(`input[name='sim-${q.id}']:checked`)||{}).value;
    return Number(v)===Number(q.kunci);
  }
  function nilaiIsian(q){
    const v = (document.querySelector(`input[name='sim-${q.id}-isian']`)||{}).value||'';
    return v.trim().toLowerCase() === String(q.kunciText||'').trim().toLowerCase();
  }

  function selesaiSimulasi(){
    const total = simState.daftar.length;
    let benar = 0;
    simState.daftar.forEach(q=>{
      benar += (q.tipe==='pg') ? (nilaiPG(q)?1:0) : (nilaiIsian(q)?1:0);
    });
    const skor = Math.round((benar/total)*100);
    const hasil = $('#simHasil');
    hasil.classList.remove('hidden');
    hasil.innerHTML = `<div class="font-semibold">Hasil Simulasi</div>
      <div class="mt-1 text-sm">Benar: <strong>${benar}</strong> dari ${total} soal • Skor: <strong>${skor}</strong></div>
      <button id="btnReview" class="btn mt-3 px-3 py-2 rounded-lg border chip text-sm">Tampilkan Pembahasan</button>`;
    $('#simInfo').textContent = `Selesai • Mapel: ${simState.mapel}`;

    $('#btnReview').addEventListener('click',()=>{
      // Tampilkan semua pembahasan
      $$('#simContainer .p-4').forEach(card=>{
        const pemb = card.querySelector('div.mt-3.hidden');
        if(pemb) pemb.classList.remove('hidden');
      })
    })
  }

  // ======= INIT =======
  function initSelectors(){
    const mapels = Object.keys(DB);
    populateSelect($('#materiMapel'), mapels);
    populateSelect($('#latihMapel'), mapels);
    populateSelect($('#simMapel'), mapels);

    const firstBab = (mapel)=> Object.keys(DB[mapel].bab);

    // Materi default
    const m0 = mapels[0];
    populateSelect($('#materiBab'), firstBab(m0));
    // Latihan default
    populateSelect($('#latihBab'), firstBab(mapels[0]));

    $('#materiMapel').addEventListener('change', e=>{
      populateSelect($('#materiBab'), firstBab(e.target.value));
    });
    $('#latihMapel').addEventListener('change', e=>{
      populateSelect($('#latihBab'), firstBab(e.target.value));
    });

    $('#btnLoadMateri').addEventListener('click',()=>{
      renderMateri($('#materiMapel').value, $('#materiBab').value);
      window.scrollTo({top:0, behavior:'smooth'});
    });

    $('#btnLoadLatihan').addEventListener('click',()=>{
      loadLatihan($('#latihMapel').value, $('#latihBab').value);
    });

    $('#btnPeriksaSemua').addEventListener('click',()=>{
      $$('#latihanContainer .p-4').forEach(card=>{
        const cek = card.querySelector('button');
        cek?.click();
      });
    });

    $('#btnMulaiSim').addEventListener('click',()=>{
      const map = $('#simMapel').value;
      const j = Math.max(5, Math.min(50, Number($('#simJumlah').value||10)));
      const d = Math.max(5, Math.min(180, Number($('#simDurasi').value||15)));
      startSimulasi(map, j, d);
      window.scrollTo({top:0, behavior:'smooth'});
    });

    // Muat awal
    renderMateri($('#materiMapel').value, $('#materiBab').value);
    loadLatihan($('#latihMapel').value, $('#latihBab').value);
  }

  // Tab switching
  $$('.tab-btn').forEach(b=> b.addEventListener('click',()=> setTab(b.dataset.tab)) );

  // Start
  setTab('materi');
  initSelectors();
  </script>
</body>
</html>


